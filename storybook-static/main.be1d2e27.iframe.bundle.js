(self.webpackChunklihim=self.webpackChunklihim||[]).push([[179],{"./apps/web/stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$":(e,n,t)=>{var r={"./auth/feature/login-form.stories.tsx":"./apps/web/stories/auth/feature/login-form.stories.tsx","./auth/feature/signup-form.stories.tsx":"./apps/web/stories/auth/feature/signup-form.stories.tsx","./auth/ui/login-form-skeleton.stories.tsx":"./apps/web/stories/auth/ui/login-form-skeleton.stories.tsx","./auth/ui/login-form.stories.tsx":"./apps/web/stories/auth/ui/login-form.stories.tsx","./auth/ui/signup-form-skeleton.stories.tsx":"./apps/web/stories/auth/ui/signup-form-skeleton.stories.tsx","./auth/ui/signup-form.stories.tsx":"./apps/web/stories/auth/ui/signup-form.stories.tsx","./shared/appbar/appbar.stories.tsx":"./apps/web/stories/shared/appbar/appbar.stories.tsx","./shared/ui/validated-input.stories.tsx":"./apps/web/stories/shared/ui/validated-input.stories.tsx"};function o(e){return t(a(e))}function a(e){if(!t.o(r,e)){var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id="./apps/web/stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$"},"./apps/web/stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$":e=>{function n(e){var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}n.keys=()=>[],n.resolve=n,n.id="./apps/web/stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$",e.exports=n},"./apps/web/.storybook/preview.tsx-generated-config-entry.js":(e,n,t)=>{"use strict";var r={};t.r(r),t.d(r,{decorators:()=>z,parameters:()=>M});var o=t("./node_modules/.pnpm/@storybook+client-api@6.5.15_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/client-api/dist/esm/ClientApi.js"),a=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),s=t("./node_modules/.pnpm/next@13.1.1_a7mipu7kvrstgwvi56qu2qyzhe/node_modules/next/image.js"),i=t.n(s),l=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),u=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Center/Center.js"),c=t("./node_modules/.pnpm/storybook-dark-mode@2.0.5_biqbaboplfbrettd7655fr4n2y/node_modules/storybook-dark-mode/dist/esm/index.js"),p=t("./node_modules/.pnpm/@tanstack+query-core@4.20.9/node_modules/@tanstack/query-core/build/lib/queryClient.mjs"),d=t("./node_modules/.pnpm/msw-storybook-addon@1.6.3_hqjmemrlubrdinu76juhfilxoe/node_modules/msw-storybook-addon/dist/index.js"),m=t("./libs/auth/testutils/src/index.ts"),f=t("./libs/shared/data-access/src/index.ts"),y=t("./node_modules/.pnpm/@mantine+styles@5.10.0_sogmqz4enknxtkxk3k5s6bqwnq/node_modules/@mantine/styles/esm/theme/ColorSchemeProvider.js"),b=t("./node_modules/.pnpm/@mantine+styles@5.10.0_sogmqz4enknxtkxk3k5s6bqwnq/node_modules/@mantine/styles/esm/theme/MantineProvider.js"),h=t("./node_modules/.pnpm/@mantine+notifications@5.10.0_3m53ouna3laykmqkiimzgz4i2m/node_modules/@mantine/notifications/esm/NotificationsProvider/NotificationsProvider.js"),v={breakpoints:{xs:600,sm:830,md:1200,lg:1540,xl:1930}};function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function I(e){if(Array.isArray(e))return e}function x(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function w(e,n){var t,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var a=[],s=!0,i=!1;try{for(o=o.call(e);!(s=(t=o.next()).done)&&(a.push(t.value),!n||a.length!==n);s=!0);}catch(l){i=!0,r=l}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}return a}}function _(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){x(e,n,t[n])})}return e}function S(e,n){return I(e)||w(e,n)||B(e,n)||_()}function B(e,n){if(e){if("string"==typeof e)return g(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,n)}}var T=function(e){var n=S((0,l.useState)("dark"),2),t=n[0],r=n[1];return(0,l.useEffect)(function(){e.colorScheme&&r(e.colorScheme)},[e.colorScheme]),(0,a.jsx)(y.A,{colorScheme:t,toggleColorScheme:function(e){r(e||("dark"===t?"light":"dark"))},children:(0,a.jsx)(b.Me,{withGlobalStyles:!0,withNormalizeCSS:!0,theme:E({colorScheme:t},v),children:(0,a.jsx)(h.N,{position:"bottom-center",containerWidth:340,children:e.children})})})};try{T.displayName="MantineProvider",T.__docgenInfo={description:"",displayName:"MantineProvider",props:{colorScheme:{defaultValue:null,description:"",name:"colorScheme",required:!1,type:{name:"enum",value:[{value:'"dark"'},{value:'"light"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["libs/shared/mantine/src/lib/mantine-provider.tsx#MantineProvider"]={docgenInfo:T.__docgenInfo,name:"MantineProvider",path:"libs/shared/mantine/src/lib/mantine-provider.tsx#MantineProvider"})}catch(O){}var L=t("./node_modules/.pnpm/@tanstack+react-query@4.20.9_biqbaboplfbrettd7655fr4n2y/node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs"),k=t("./node_modules/.pnpm/@tanstack+react-query-devtools@4.20.9_hin5uqs2feg5fwcu6eooischsu/node_modules/@tanstack/react-query-devtools/build/lib/index.mjs"),j={queries:{staleTime:1e4,retry:1}},P=new p.S({defaultOptions:j}),A=function(e){var n=e.children,t=e.client,r=e.isWeb;return(0,a.jsxs)(L.aH,{client:void 0===t?P:t,children:[n,(void 0===r||r)&&(0,a.jsx)(k.t,{initialIsOpen:!1})]})};try{A.displayName="ReactQueryProvider",A.__docgenInfo={description:"",displayName:"ReactQueryProvider",props:{client:{defaultValue:{value:"new QueryClient({\n  defaultOptions: defaultQueryClientOptions,\n})"},description:"",name:"client",required:!1,type:{name:"QueryClient"}},isWeb:{defaultValue:{value:"true"},description:"",name:"isWeb",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["libs/shared/react-query/src/lib/react-query-provider.tsx#ReactQueryProvider"]={docgenInfo:A.__docgenInfo,name:"ReactQueryProvider",path:"libs/shared/react-query/src/lib/react-query-provider.tsx#ReactQueryProvider"})}catch(R){}function D(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function C(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){D(e,n,t[n])})}return e}function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function F(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e}var V=new p.S({logger:{log:console.log,warn:console.warn,error:console.error},defaultOptions:{queries:{staleTime:0,retry:!1,cacheTime:0},mutations:{retry:!1}}});(0,d.initialize)({onUnhandledRequest:function(e){var n=e.method,t=e.url;t.pathname.startsWith("/api")&&console.error("Unhandled ".concat(n,' request to "').concat(t,'"'))}});var G=i();Object.defineProperty(s,"default",{configurable:!0,value:function(e){return(0,a.jsx)(G,F(C({},e),{unoptimized:!0}))}});var q=function(e){return(0,a.jsx)(T,{colorScheme:(0,c.vs)()?"dark":"light",children:(0,a.jsx)(A,{client:V,children:(0,a.jsx)(f.MF,{children:(0,a.jsx)(u.M,{children:e.children})})})})},M={darkMode:{current:"dark"},msw:{handlers:[(0,m.a2)(200,{isAnon:!0})]}},z=[function(e){return(0,a.jsx)(q,{children:e()})},d.mswDecorator];function H(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function U(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?H(Object(t),!0).forEach(function(n){W(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function W(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}Object.keys(r).forEach(function(e){var n=r[e];switch(e){case"args":return(0,o.uc)(n);case"argTypes":return(0,o.v9)(n);case"decorators":return n.forEach(function(e){return(0,o.$9)(e,!1)});case"loaders":return n.forEach(function(e){return(0,o.HZ)(e,!1)});case"parameters":return(0,o.h1)(U({},n),!1);case"argTypesEnhancers":return n.forEach(function(e){return(0,o.My)(e)});case"argsEnhancers":return n.forEach(function(e){return(0,o._C)(e)});case"render":return(0,o.$P)(n);case"globals":case"globalTypes":var t={};return t[e]=n,(0,o.h1)(t,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(e+" was not supported :( !")}})},"./libs/auth/core/src/index.ts":(e,n,t)=>{"use strict";t.d(n,{AX:()=>E,Bx:()=>_,_X:()=>B,GL:()=>P,dx:()=>A,Lm:()=>$,fq:()=>W,k7:()=>K,Ss:()=>X,Y9:()=>ea,BR:()=>ec,lp:()=>G,R:()=>q,C9:()=>M,Yq:()=>l,jw:()=>d,Zl:()=>u,ro:()=>c,P3:()=>m,Rl:()=>f,pU:()=>p,dE:()=>eu,WN:()=>em,Tj:()=>ep,m7:()=>ed,kw:()=>R,VU:()=>D,lW:()=>F,W4:()=>C,vj:()=>N,uW:()=>V,SG:()=>T,pS:()=>O,GN:()=>j,RZ:()=>L,IQ:()=>k,Qi:()=>J,ZD:()=>Q,DZ:()=>Z});var r="First Name",o="Last Name",a="Username",s="Email",i="Password",l="password",u="Jane",c="Doe",p="jopay",d="kamusta@ka.na",m="wag-ka-nang-mawala",f="jopay@kmusta.kna",y=2,b=32,h=4,v=32,g=6,I=64,x=/^[A-Za-z]*$/,w=/^[A-Za-z][\dA-Za-z-]*$/,_="/api/auth/session",E="/api/auth/login",S="/api/auth/logout",B="/api/auth/signup",T="Login",O="Don't have an account?",L="Signup",k="Already have an account?",j="Logout",P="Submit login",A="Submit signup",R="login-link",D="login-loading",C="signup-link",N="signup-loading",F="login-skeleton",V="signup-skeleton",G="Login successful",q="You are now logged in",M="Signup successful",z="You are being logged out",H=" You have been logged out",U="Logout successful",W="Login Failed",K="Incorrect username/email or password",X="Signup Failed",Y="Logout Failed",Z=[{name:"firstname",label:r,placeholder:u},{name:"lastname",label:o,placeholder:c}],J=[{name:"username",label:a,placeholder:p},{name:"email",label:s,placeholder:d},{name:l,label:i,placeholder:m}],Q=[{name:"principal",label:"Username / Email",placeholder:f},{name:l,label:i,placeholder:m}],$={Closed:0,Login:1,Logout:2,Signup:3},ee=t("./node_modules/.pnpm/zod@3.20.2/node_modules/zod/lib/index.mjs"),en=t("./libs/shared/core/src/index.ts"),et=ee.z.string({required_error:(0,en.IU)(s,en.Sd),invalid_type_error:(0,en.IU)(s,en.eN)}).email((0,en.IU)(s,en.eN)),er=(0,en.Jg)(i,g,I),eo=(0,en.Jg)(a,h,v).regex(w,(0,en.IU)(a,en.eN)),ea=ee.z.object({principal:ee.z.union([eo,et]),password:er}),es=function(e){return(0,en.Jg)(e,y,b).regex(x,(0,en.IU)(e,en.eN))},ei=es(r),el=es(o),eu=ee.z.discriminatedUnion("isAnon",[ee.z.object({isAnon:ee.z.literal(!0)}),ee.z.object({id:ee.z.string().uuid(),avatar:ee.z.string(),email:et,username:eo,firstname:ei,lastname:el,bio:ee.z.optional(ee.z.string()),isAnon:ee.z.literal(!1)})]),ec=en.G3.extend({session:eu}),ep=ee.z.object({firstname:ei,lastname:el,username:eo,email:et,password:er}),ed=en.G3.extend({session:eu}),em=en.G3.extend({field:ee.z.union([ee.z.literal("firstname"),ee.z.literal("lastname"),ee.z.literal("username"),ee.z.literal("email"),ee.z.literal("password"),en.qj])})},"./libs/auth/feature/src/index.ts":(e,n,t)=>{"use strict";t.d(n,{U:()=>E,C:()=>B});var r=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),o=t("./node_modules/.pnpm/react-hook-form@7.41.5_react@18.2.0/node_modules/react-hook-form/dist/index.esm.mjs"),a=t("./libs/auth/core/src/index.ts"),s=t("./node_modules/.pnpm/@tanstack+react-query@4.20.9_biqbaboplfbrettd7655fr4n2y/node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs"),i=t("./node_modules/.pnpm/@tanstack+react-query@4.20.9_biqbaboplfbrettd7655fr4n2y/node_modules/@tanstack/react-query/build/lib/useMutation.mjs"),l=t("./libs/shared/core/src/index.ts"),u=t("./libs/shared/data-access/src/index.ts"),c=t("./libs/shared/utils/src/index.ts");function p(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function d(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){p(e,n,t[n])})}return e}var m=(0,u.SC)(a.AX,{method:l.S5,responseSchema:a.BR,payloadSchema:a.Y9}),f=function(e){var n=(0,s.NL)(),t=(0,c.d)(),r=t.notifySuccess,o=t.notifyError;return(0,i.D)(function(e){return m(e)},{onSuccess:function(t){n.setQueryData(["session"],d({},t.session)),e(),r(a.lp,t.message)},onError:function(e){var n=e.message===l.cv?a.k7:e.message;o(a.fq,n)}})},y=t("./node_modules/.pnpm/next@13.1.1_a7mipu7kvrstgwvi56qu2qyzhe/node_modules/next/router.js");function b(e,n,t,r,o,a,s){try{var i=e[a](s),l=i.value}catch(u){t(u);return}i.done?n(l):Promise.resolve(l).then(r,o)}function h(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function s(e){b(a,r,o,s,i,"next",e)}function i(e){b(a,r,o,s,i,"throw",e)}s(void 0)})}}function v(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function g(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){v(e,n,t[n])})}return e}var I=function(e,n){var t,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(e,s)}catch(i){a=[6,i],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},x=(0,u.SC)(a._X,{method:l.S5,responseSchema:a.m7,errorSchema:a.WN,payloadSchema:a.Tj}),w=function(e){var n=(0,s.NL)(),t=(0,y.useRouter)(),r=(0,c.d)(),o=r.notifySuccess,l=r.notifyError;return(0,i.D)(function(e){return x(e)},{onSuccess:function(r){return h(function(){return I(this,function(s){switch(s.label){case 0:return n.setQueryData(["session"],g({},r.session)),e(),[4,t.push("/")];case 1:return s.sent(),o(a.C9,r.message),[2]}})})()},onError:function(e){l(a.Ss,e.message)}})},_=t("./libs/auth/ui/src/index.ts"),E=function(){var e=(0,u.EL)().setAuthModalState,n=f(function(){return e(a.Lm.Closed)}),t=n.mutate,s=n.error,i=n.isLoading,c=(0,o.cI)({mode:"onSubmit"}),p=c.control,d=c.handleSubmit,m=c.formState.isValid,y=s&&s.message!==l.He||!m;return(0,r.jsx)(_.U0,{isLoading:i,hasError:y,showSignup:function(){return e(a.Lm.Signup)},control:p,onSubmit:d(function(e){t(e)})})},S=t("./node_modules/.pnpm/@hookform+resolvers@2.9.10_react-hook-form@7.41.5/node_modules/@hookform/resolvers/zod/dist/zod.mjs"),B=function(){var e,n,t,s,i,l=(0,u.EL)().setAuthModalState,c=w(function(){return l(a.Lm.Closed)}),p=c.mutate,d=c.error,m=c.isLoading,f=(0,o.cI)({resolver:(0,S.F)(a.Tj)}),y=f.control,b=f.handleSubmit,h=f.formState.errors;return(0,r.jsx)(_.Cd,{isLoading:m,control:y,showLogin:function(){return l(a.Lm.Login)},errors:{firstname:Boolean((null==d?void 0:d.field)==="firstname"||(null===(e=h.firstname)||void 0===e?void 0:e.message)),lastname:Boolean((null==d?void 0:d.field)==="lastname"||(null===(n=h.lastname)||void 0===n?void 0:n.message)),username:(null==d?void 0:d.field)==="username"?d.message:Boolean(null===(t=h.username)||void 0===t?void 0:t.message),email:(null==d?void 0:d.field)==="email"?d.message:Boolean(null===(s=h.email)||void 0===s?void 0:s.message),password:(null==d?void 0:d.field)==="password"?d.message:Boolean(null===(i=h.password)||void 0===i?void 0:i.message)},onSubmit:b(function(e){return p(e)})})}},"./libs/auth/testutils/src/index.ts":(e,n,t)=>{"use strict";t.d(n,{g0:()=>d,$5:()=>y,oG:()=>l,a2:()=>m,uO:()=>f});var r,o,a,s=t("./node_modules/.pnpm/msw@0.49.2_typescript@4.8.4/node_modules/msw/lib/index.js"),i=t("./libs/auth/core/src/index.ts"),l=function(e){return s.rest.post(i.AX,function(n,t,o){return e.networkError?t.networkError("err-network"):t(o.status(null!==(r=e.status)&&void 0!==r?r:200),o.json(e.body),o.delay(e.delay))})},u=t("./node_modules/.pnpm/@faker-js+faker@7.6.0/node_modules/@faker-js/faker/dist/esm/index.mjs"),c=function(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return{principal:e?faker.internet.email():faker.lorem.slug(2),password:faker.internet.password()}},p=function(e){return rest.post(API_URL_LOGOUT,function(n,t,r){return e.networkError?t.networkError("err-network"):t(r.status(null!==(o=e.status)&&void 0!==o?o:200),r.json(e.body),r.delay(e.delay))})},d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{id:u.We.datatype.uuid(),avatar:u.We.image.people(40,40,!0),email:u.We.internet.email(),username:u.We.internet.domainWord(),firstname:"Firstname",lastname:"Lastname",isAnon:e}},m=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return s.rest.get(i.Bx,function(r,o,a){return o(a.status(e),a.json(n),a.delay(t))})},f=function(e){return s.rest.post(i._X,function(n,t,r){return e.networkError?t.networkError("err-network"):t(r.status(null!==(a=e.status)&&void 0!==a?a:200),r.json(e.body),r.delay(e.delay))})},y=function(){return{firstname:u.We.lorem.word({length:{min:4,max:16}}),lastname:u.We.lorem.word({length:{min:4,max:16}}),username:u.We.lorem.slug(2),email:u.We.internet.email(),password:u.We.internet.password(16)}}},"./libs/auth/ui/src/index.ts":(e,n,t)=>{"use strict";t.d(n,{U0:()=>w,eS:()=>B,Cd:()=>L,Mm:()=>j});var r=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),o=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Stack/Stack.js"),a=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Title/Title.js"),s=t("./libs/auth/core/src/index.ts"),i=t("./libs/shared/ui/src/index.ts"),l=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Group/Group.js"),u=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Text/Text.js"),c=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Button/Button.js"),p=function(e){var n=e.isSignup,t=void 0!==n&&n,o=e.onClick;return(0,r.jsxs)(l.Z,{position:"apart",children:[(0,r.jsx)(u.x,{color:"dimmed",size:"sm",sx:function(e){return{"&:hover":{color:e.colors.blue[4],cursor:"pointer"}}},"data-testid":t?s.kw:s.W4,onClick:o,children:t?s.IQ:s.pS}),(0,r.jsx)(c.z,{type:"submit",size:"sm","aria-label":t?s.dx:s.GL,radius:"md",children:t?s.RZ:s.SG})]})};try{p.displayName="FormFooter",p.__docgenInfo={description:"",displayName:"FormFooter",props:{isSignup:{defaultValue:{value:"false"},description:"",name:"isSignup",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"TVoidFn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["libs/auth/ui/src/lib/form-footer.tsx#FormFooter"]={docgenInfo:p.__docgenInfo,name:"FormFooter",path:"libs/auth/ui/src/lib/form-footer.tsx#FormFooter"})}catch(d){}var m=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Paper/Paper.js"),f=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/LoadingOverlay/LoadingOverlay.js"),y=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Center/Center.js"),b=function(e){var n=e.children;return(0,r.jsx)(m.X,{withBorder:!0,sx:{minWidth:320,position:"relative"},py:20,px:40,radius:"lg",children:n})},h=function(e){var n=e.children,t=e.isLoading,o=e.onSubmit,a=e.loadingTestId;return(0,r.jsxs)(b,{children:[(0,r.jsx)(f.f,{visible:t,"data-testid":a}),(0,r.jsx)("form",{onSubmit:o,children:(0,r.jsx)(y.M,{children:n})})]})};try{b.displayName="FormPaper",b.__docgenInfo={description:"",displayName:"FormPaper",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["libs/auth/ui/src/lib/form-wrapper.tsx#FormPaper"]={docgenInfo:b.__docgenInfo,name:"FormPaper",path:"libs/auth/ui/src/lib/form-wrapper.tsx#FormPaper"})}catch(v){}try{h.displayName="FormWrapper",h.__docgenInfo={description:"",displayName:"FormWrapper",props:{onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"TVoidFn"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},loadingTestId:{defaultValue:null,description:"",name:"loadingTestId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["libs/auth/ui/src/lib/form-wrapper.tsx#FormWrapper"]={docgenInfo:h.__docgenInfo,name:"FormWrapper",path:"libs/auth/ui/src/lib/form-wrapper.tsx#FormWrapper"})}catch(g){}function I(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){I(e,n,t[n])})}return e}var w=function(e){var n=e.isLoading,t=e.hasError,l=e.onSubmit,u=e.showSignup,c=e.control;return(0,r.jsx)(h,{isLoading:n,loadingTestId:s.VU,onSubmit:l,children:(0,r.jsxs)(o.K,{sx:{width:"32ch"},spacing:20,children:[(0,r.jsx)(a.D,{order:1,children:"Login"}),s.ZD.map(function(e){return(0,r.jsx)(i.a,{control:c,error:t,inputProps:x({},e),isPassword:e.name===s.Yq},e.name)}),(0,r.jsx)(p,{onClick:u})]})})};try{w.displayName="LoginForm",w.__docgenInfo={description:"",displayName:"LoginForm",props:{isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},hasError:{defaultValue:null,description:"",name:"hasError",required:!0,type:{name:"boolean"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"TVoidFn"}},showSignup:{defaultValue:null,description:"",name:"showSignup",required:!0,type:{name:"TVoidFn"}},control:{defaultValue:null,description:"",name:"control",required:!0,type:{name:"Control<LoginPayload, any>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["libs/auth/ui/src/lib/login-form.tsx#LoginForm"]={docgenInfo:w.__docgenInfo,name:"LoginForm",path:"libs/auth/ui/src/lib/login-form.tsx#LoginForm"})}catch(_){}var E=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Skeleton/Skeleton.js"),S=function(){return(0,r.jsxs)(l.Z,{position:"apart",children:[(0,r.jsx)(E.O,{height:23,width:145}),(0,r.jsx)(E.O,{height:35,width:80,radius:"md"})]})},B=function(){return(0,r.jsx)(b,{children:(0,r.jsx)(y.M,{"data-testid":s.lW,children:(0,r.jsxs)(o.K,{sx:{width:"32ch"},spacing:25,children:[(0,r.jsx)(a.D,{order:1,children:"Login"}),(0,r.jsx)(E.O,{height:45,radius:"md",mt:10}),(0,r.jsx)(E.O,{height:45,radius:"md",mt:10}),(0,r.jsx)(S,{})]})})})};function T(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){T(e,n,t[n])})}return e}var L=function(e){var n=e.isLoading,t=e.onSubmit,u=e.control,c=e.errors,d=void 0===c?{firstname:!1,lastname:!1,username:!1,email:!1,password:!1}:c,m=e.showLogin;return(0,r.jsx)(h,{isLoading:n,loadingTestId:s.vj,onSubmit:t,children:(0,r.jsxs)(o.K,{sx:{width:"36ch"},spacing:20,children:[(0,r.jsx)(a.D,{order:1,children:"Sign Up"}),(0,r.jsx)(l.Z,{children:s.DZ.map(function(e){return(0,r.jsx)(i.a,{sx:{width:"17ch"},control:u,error:d[e.name],inputProps:O({},e)},e.name)})}),s.Qi.map(function(e){return(0,r.jsx)(i.a,{control:u,error:d[e.name],inputProps:O({},e),isPassword:e.name===s.Yq},e.name)}),(0,r.jsx)(p,{isSignup:!0,onClick:m})]})})};try{L.displayName="SignupForm",L.__docgenInfo={description:"",displayName:"SignupForm",props:{isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},control:{defaultValue:null,description:"",name:"control",required:!0,type:{name:"Control<SignupPayload, any>"}},showLogin:{defaultValue:null,description:"",name:"showLogin",required:!0,type:{name:"TVoidFn"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"TVoidFn"}},errors:{defaultValue:{value:"{\n    firstname: false,\n    lastname: false,\n    username: false,\n    email: false,\n    password: false,\n  }"},description:"",name:"errors",required:!1,type:{name:"Record<string | number | symbol, string | boolean>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["libs/auth/ui/src/lib/signup-form.tsx#SignupForm"]={docgenInfo:L.__docgenInfo,name:"SignupForm",path:"libs/auth/ui/src/lib/signup-form.tsx#SignupForm"})}catch(k){}var j=function(){return(0,r.jsx)(b,{children:(0,r.jsx)(y.M,{"data-testid":s.uW,children:(0,r.jsxs)(o.K,{sx:{width:"36ch"},spacing:33,children:[(0,r.jsx)(a.D,{order:1,children:"Sign Up"}),(0,r.jsxs)(l.Z,{position:"apart",children:[(0,r.jsx)(E.O,{height:45,radius:"md",width:"45%"}),(0,r.jsx)(E.O,{height:45,radius:"md",width:"45%"})]}),(0,r.jsx)(E.O,{height:45,radius:"md"}),(0,r.jsx)(E.O,{height:45,radius:"md"}),(0,r.jsx)(E.O,{height:45,radius:"md"}),(0,r.jsx)(S,{})]})})})}},"./libs/shared/core/src/index.ts":(e,n,t)=>{"use strict";t.d(n,{ZM:()=>v,XD:()=>h,He:()=>i,cv:()=>c,kN:()=>p,Fl:()=>d,eN:()=>b,Sd:()=>m,G3:()=>x,S5:()=>o,_N:()=>g,JG:()=>a,vT:()=>s,qj:()=>w,IU:()=>_,Jg:()=>E});var r="GET",o="POST",a="lihim",s="Loading",i="Something went wrong :(",l="Network request failed",u="Method not allowed",c="Invalid request data",p="Invalid response data",d="No internet connection",m="is required",f="is too short",y="is too long",b="is invalid",h="show password icon",v="hide password icon",g="password-visibility",I=t("./node_modules/.pnpm/zod@3.20.2/node_modules/zod/lib/index.mjs"),x=I.z.object({message:I.z.string()}),w=I.z.undefined(),_=function(e,n){return"".concat(e," ").concat(n)},E=function(e,n,t){return I.z.string({required_error:_(e,m),invalid_type_error:_(e,b)}).min(n,_(e,f)).max(t,_(e,y))}},"./libs/shared/data-access/src/index.ts":(e,n,t)=>{"use strict";t.d(n,{MF:()=>W,SC:()=>A,EL:()=>X});var r=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),o=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),a=t("./libs/auth/core/src/index.ts"),s=t("./node_modules/.pnpm/@tanstack+react-query@4.20.9_biqbaboplfbrettd7655fr4n2y/node_modules/@tanstack/react-query/build/lib/useQuery.mjs"),i=t("./libs/shared/core/src/index.ts"),l=t("./libs/shared/utils/src/index.ts");function u(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}function p(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function d(e,n,t){return(d=p()?Reflect.construct:function(e,n,t){var r=[null];r.push.apply(r,n);var o=new(Function.bind.apply(e,r));return t&&h(o,t.prototype),o}).apply(null,arguments)}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&h(e,n)}function y(e){return -1!==Function.toString.call(e).indexOf("[native code]")}function b(e,n){return n&&("object"===v(n)||"function"==typeof n)?n:u(e)}function h(e,n){return(h=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var v=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function g(e){var n="function"==typeof Map?new Map:void 0;return(g=function(e){if(null===e||!y(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return d(e,arguments,m(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),h(t,e)})(e)}function I(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function x(e){var n=I();return function(){var t,r=m(e);if(n){var o=m(this).constructor;t=Reflect.construct(r,arguments,o)}else t=r.apply(this,arguments);return b(this,t)}}var w=function(e){f(t,e);var n=x(t);function t(e){var r;return c(this,t),(r=n.call(this)).body=e,Object.setPrototypeOf(u(r),t.prototype),r}return t}(g(Error));function _(e,n){return null!=n&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](e):e instanceof n}var E=function(e,n){if(!navigator.onLine)return Error(i.Fl);if(_(e,w)){var t=(null!=n?n:i.G3).safeParse(e.body);return t.success?t.data:Error(i.He)}return Error(i.He)},S=function(e,n,t){var r=e;return"GET"===n&&Boolean(t)&&(r+="?"+new URLSearchParams(t)),{url:r,body:"POST"===n?JSON.stringify(t):void 0}};function B(e,n,t,r,o,a,s){try{var i=e[a](s),l=i.value}catch(u){t(u);return}i.done?n(l):Promise.resolve(l).then(r,o)}function T(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function s(e){B(a,r,o,s,i,"next",e)}function i(e){B(a,r,o,s,i,"throw",e)}s(void 0)})}}function O(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){O(e,n,t[n])})}return e}var k=function(e,n){var t,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(e,s)}catch(i){a=[6,i],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},j=new w({message:i.cv}),P=new w({message:i.kN}),A=function(e,n){return function(){var t=T(function(t){var r,o,a,s,u,c,p,d,m,f,y,b;return k(this,function(h){switch(h.label){case 0:o=(r=L({},n)).method,a=r.responseSchema,u=void 0===(s=r.payloadSchema)?i.qj:s,p=void 0===(c=r.errorSchema)?i.G3:c,h.label=1;case 1:return h.trys.push([1,4,,5]),m=(d=S(e,o,(0,l.$)(t,j,u))).url,f=d.body,[4,fetch(m,{method:o,body:f})];case 2:return[4,(y=h.sent()).json()];case 3:if(b=h.sent(),!y.ok)throw new w(b);return[2,(0,l.$)(b,P,a)];case 4:throw E(h.sent(),p);case 5:return[2]}})});return function(e){return t.apply(this,arguments)}}()};function R(e,n,t,r,o,a,s){try{var i=e[a](s),l=i.value}catch(u){t(u);return}i.done?n(l):Promise.resolve(l).then(r,o)}function D(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function s(e){R(a,r,o,s,i,"next",e)}function i(e){R(a,r,o,s,i,"throw",e)}s(void 0)})}}var C=function(e,n){var t,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(e,s)}catch(i){a=[6,i],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},N=A(a.Bx,{method:"GET",responseSchema:a.dE}),F=function(){return(0,s.a)(["session"],D(function(){return C(this,function(e){return[2,N()]})}))};function V(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function G(e){if(Array.isArray(e))return e}function q(e,n){var t,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var a=[],s=!0,i=!1;try{for(o=o.call(e);!(s=(t=o.next()).done)&&(a.push(t.value),!n||a.length!==n);s=!0);}catch(l){i=!0,r=l}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}return a}}function M(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function z(e,n){return G(e)||q(e,n)||H(e,n)||M()}function H(e,n){if(e){if("string"==typeof e)return V(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return V(e,n)}}var U=(0,o.createContext)({isLoading:!1,session:{isAnon:!0},authModalState:a.Lm.Closed,setAuthModalState:function(){return null}}),W=function(e){var n=e.children,t=F(),s=t.isLoading,i=t.isFetching,l=t.data,u=z((0,o.useState)(a.Lm.Closed),2),c=u[0],p=u[1],d=(0,o.useMemo)(function(){return{isLoading:s||i,session:null!=l?l:{isAnon:!0},authModalState:c,setAuthModalState:p}},[c,i,s,l]);return(0,r.jsx)(U.Provider,{value:d,children:n})};try{W.displayName="RootProvider",W.__docgenInfo={description:"",displayName:"RootProvider",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["libs/shared/data-access/src/lib/context/root-context.tsx#RootProvider"]={docgenInfo:W.__docgenInfo,name:"RootProvider",path:"libs/shared/data-access/src/lib/context/root-context.tsx#RootProvider"})}catch(K){}var X=function(){return(0,o.useContext)(U)}},"./libs/shared/testutils/storybook/src/index.ts":(e,n,t)=>{"use strict";t.d(n,{J:()=>l});var r=t("./node_modules/.pnpm/@storybook+jest@0.0.10_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/jest/dist/esm/index.js"),o=t("./node_modules/.pnpm/@storybook+testing-library@0.0.13_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/testing-library/dist/esm/index.js");function a(e,n,t,r,o,a,s){try{var i=e[a](s),l=i.value}catch(u){t(u);return}i.done?n(l):Promise.resolve(l).then(r,o)}function s(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var s=e.apply(n,t);function i(e){a(s,r,o,i,l,"next",e)}function l(e){a(s,r,o,i,l,"throw",e)}i(void 0)})}}var i=function(e,n){var t,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(e,s)}catch(i){a=[6,i],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},l=function(){var e=s(function(e,n){var t,a;return i(this,function(s){switch(s.label){case 0:return(0,r.l)(e).toHaveValue(null!==(t=n.value)&&void 0!==t?t:""),(0,r.l)(e).toHaveAttribute("type",null!==(a=n.type)&&void 0!==a?a:"text"),[4,(0,o.X_)(function(){var t;(0,r.l)("password"===n.name?e.parentElement:e).toHaveAttribute("aria-invalid",null!==(t=n.invalid)&&void 0!==t?t:"false")})];case 1:return s.sent(),(0,r.l)(e).toHaveAttribute("name",n.name),(0,r.l)(e).toHaveAttribute("placeholder",n.placeholder),(0,r.l)(o.sp.getByText(n.label)).toBeVisible(),[2]}})});return function(n,t){return e.apply(this,arguments)}}()},"./libs/shared/ui/src/index.ts":(e,n,t)=>{"use strict";t.d(n,{a:()=>p});var r=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),o=t("./node_modules/.pnpm/react-hook-form@7.41.5_react@18.2.0/node_modules/react-hook-form/dist/index.esm.mjs"),a=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/PasswordInput/PasswordInput.js"),s=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/TextInput/TextInput.js"),i=t("./node_modules/.pnpm/react-icons@4.7.1_react@18.2.0/node_modules/react-icons/bi/index.esm.js"),l=t("./libs/shared/core/src/index.ts");function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){u(e,n,t[n])})}return e}var p=function(e){var n,t=e.control,u=e.inputProps,p=e.isPassword,d=void 0!==p&&p,m=e.error,f=void 0!==m&&m,y=e.sx;return(0,r.jsx)(o.Qr,{defaultValue:null!==(n=u.defaultValue)&&void 0!==n?n:"",name:u.name,control:t,render:function(e){var n=e.field;return d?(0,r.jsx)(a.W,c({required:!0,label:u.label,placeholder:u.placeholder,error:f,sx:y,visibilityToggleIcon:function(e){var n=e.reveal,t=e.size;return(0,r.jsx)("div",{"data-testid":l._N,children:n?(0,r.jsx)(i.nJ9,{size:t,title:l.ZM}):(0,r.jsx)(i.A7v,{size:t,title:l.XD})})}},n)):(0,r.jsx)(s.o,c({required:!0,label:u.label,placeholder:u.placeholder,error:f,sx:y},n))}})};try{p.displayName="ValidatedInput",p.__docgenInfo={description:"",displayName:"ValidatedInput",props:{control:{defaultValue:null,description:"",name:"control",required:!0,type:{name:"Control<T, any>"}},inputProps:{defaultValue:null,description:"",name:"inputProps",required:!0,type:{name:"InputProps<T>"}},isPassword:{defaultValue:null,description:"",name:"isPassword",required:!1,type:{name:"boolean"}},error:{defaultValue:null,description:"",name:"error",required:!1,type:{name:"string | boolean"}},sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"Sx"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["libs/shared/ui/src/lib/validated-input.tsx#ValidatedInput"]={docgenInfo:p.__docgenInfo,name:"ValidatedInput",path:"libs/shared/ui/src/lib/validated-input.tsx#ValidatedInput"})}catch(d){}},"./libs/shared/utils/src/index.ts":(e,n,t)=>{"use strict";t.d(n,{$:()=>r,d:()=>d});var r=function(e,n,t){var r=t.safeParse(e);if(!r.success)throw n;return r.data},o=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),a=t("./node_modules/.pnpm/@mantine+notifications@5.10.0_3m53ouna3laykmqkiimzgz4i2m/node_modules/@mantine/notifications/esm/events.js"),s=t("./node_modules/.pnpm/react-icons@4.7.1_react@18.2.0/node_modules/react-icons/bs/index.esm.js"),i=t("./node_modules/.pnpm/uid@2.0.1/node_modules/uid/dist/index.mjs"),l=t("./libs/shared/core/src/index.ts");function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){u(e,n,t[n])})}return e}var p={success:{color:"green",icon:(0,o.jsx)(s.nRB,{}),autoClose:4e3},error:{color:"red",icon:(0,o.jsx)(s.o86,{}),autoClose:9e3}},d=function(){var e=(0,i.h)(),n=function(n,t,r,o){(o?a.wD:a.c0)(c({id:e,title:n,message:t},r?p.success:p.error))};return{id:e,notifyLoading:function(n){(0,a.HN)(),(0,a.c0)({id:e,color:"blue",title:l.vT,message:n,loading:!0,autoClose:!1,disallowClose:!0})},notifySuccess:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(e,t,!0,r)},notifyError:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(e,t,!1,r)}}}},"./apps/web/stories/auth/feature/login-form.stories.tsx":(e,n,t)=>{"use strict";t.r(n),t.d(n,{ApiError:()=>T,Default:()=>E,InternalError:()=>O,Loading:()=>S,Success:()=>L,ValidationError:()=>B,default:()=>I});var r=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),o=t("./node_modules/.pnpm/@storybook+jest@0.0.10_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/jest/dist/esm/index.js"),a=t("./node_modules/.pnpm/@storybook+testing-library@0.0.13_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/testing-library/dist/esm/index.js"),s=t("./libs/auth/core/src/index.ts"),i=t("./libs/auth/feature/src/index.ts"),l=t("./libs/auth/testutils/src/index.ts"),u=t("./libs/shared/core/src/index.ts"),c=t("./libs/shared/testutils/storybook/src/index.ts");function p(e,n,t,r,o,a,s){try{var i=e[a](s),l=i.value}catch(u){t(u);return}i.done?n(l):Promise.resolve(l).then(r,o)}function d(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function s(e){p(a,r,o,s,i,"next",e)}function i(e){p(a,r,o,s,i,"throw",e)}s(void 0)})}}function m(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){m(e,n,t[n])})}return e}function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function b(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e}var h=function(e,n){var t,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(e,s)}catch(i){a=[6,i],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},v="\n\nimport { expect } from '@storybook/jest';\nimport type { ComponentMeta, ComponentStory } from '@storybook/react';\nimport { screen, userEvent, waitFor, within } from '@storybook/testing-library';\n\nimport {\n  ARIA_SUBMIT_LOGIN,\n  ERR_LOGIN_FAILED,\n  ERR_LOGIN_INCORRECT,\n  loginInputs,\n  MSG_LOGIN_OK,\n  MSG_LOGIN_OK_INFO,\n  PLACEHOLDER_PASSWORD,\n  PLACEHOLDER_PRINCIPAL,\n  TESTID_LOGIN_LOADING,\n  TESTID_SIGNUP_LINK,\n  TEXT_LOGIN_FOOTER,\n} from '@lihim/auth/core';\nimport { LoginForm } from '@lihim/auth/feature';\nimport {\n  fakeSession,\n  mockLoginResponse,\n  mockSessionResponse,\n} from '@lihim/auth/testutils';\nimport { ERR_INTERNAL, ERR_INVALID_REQUEST } from '@lihim/shared/core';\nimport { checkInputDefaults } from '@lihim/shared/testutils/storybook';\n\nexport default {\n  component: LoginForm,\n} as ComponentMeta<typeof LoginForm>;\n\nconst Template: ComponentStory<typeof LoginForm> = () => <LoginForm />;\n\nconst fillSignin = async (\n  canvasElement: HTMLElement,\n  principal?: string,\n  password?: string,\n) => {\n  const canvas = within(canvasElement);\n\n  // Components\n  const principalInput = await canvas.findByPlaceholderText(\n    PLACEHOLDER_PRINCIPAL,\n  );\n  const passwordInput = await canvas.findByPlaceholderText(\n    PLACEHOLDER_PASSWORD,\n  );\n\n  // Type invalid payload\n  userEvent.type(principalInput, principal || 'demo');\n  userEvent.type(passwordInput, password || '123456');\n  userEvent.keyboard('{Enter}');\n};\n\nconst assertIncorrectLogin = async (isInternal = false) => {\n  // Assert notification\n  await screen.findByText(ERR_LOGIN_FAILED);\n  expect(screen.getByText(ERR_LOGIN_FAILED)).toBeInTheDocument();\n  expect(\n    screen.getByText(isInternal ? ERR_INTERNAL : ERR_LOGIN_INCORRECT),\n  ).toBeInTheDocument();\n\n  if (isInternal) {\n    // Assert no red borders for internal error\n    expect(\n      screen.getByPlaceholderText(PLACEHOLDER_PRINCIPAL),\n    ).not.toBeInvalid();\n    expect(\n      screen.getByPlaceholderText(PLACEHOLDER_PASSWORD).parentElement,\n    ).not.toBeInvalid();\n  } else {\n    // Assert red borders\n    await waitFor(() => {\n      expect(screen.getByPlaceholderText(PLACEHOLDER_PRINCIPAL)).toBeInvalid();\n    });\n    expect(\n      screen.getByPlaceholderText(PLACEHOLDER_PASSWORD).parentElement,\n    ).toBeInvalid();\n  }\n};\n\nexport const Default = Template.bind({});\nDefault.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n    ],\n  },\n};\nDefault.play = async ({ canvasElement }) => {\n  const canvas = within(canvasElement);\n\n  // Locate elements\n  const principalInput = canvas.getByPlaceholderText(PLACEHOLDER_PRINCIPAL);\n  const passwordInput = canvas.getByPlaceholderText(PLACEHOLDER_PASSWORD);\n  const submitBtn = canvas.getByRole('button', { name: ARIA_SUBMIT_LOGIN });\n  const signupLink = canvas.getByTestId(TESTID_SIGNUP_LINK);\n\n  // Assert input defaults\n  await checkInputDefaults(principalInput, loginInputs[0]);\n  await checkInputDefaults(passwordInput, {\n    ...loginInputs[1],\n    type: 'password',\n  });\n  expect(submitBtn).toBeVisible();\n  expect(signupLink).toBeVisible();\n  expect(canvas.getByText(TEXT_LOGIN_FOOTER)).toBeVisible();\n};\n\nexport const Loading = Template.bind({});\nLoading.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock long running request\n      mockLoginResponse({\n        delay: 50_000,\n        status: 500,\n        body: { message: ERR_INTERNAL },\n      }),\n    ],\n  },\n};\nLoading.play = async ({ canvasElement }) => {\n  await fillSignin(canvasElement);\n\n  const canvas = within(canvasElement);\n  await waitFor(() => {\n    expect(canvas.getByTestId(TESTID_LOGIN_LOADING)).toBeVisible();\n  });\n};\n\nexport const ValidationError = Template.bind({});\nValidationError.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response (long delay since validation is instant)\n      // Should not display loading overlay\n      mockLoginResponse({\n        delay: 10_000,\n        status: 400,\n        body: { message: ERR_INTERNAL },\n      }),\n    ],\n  },\n};\n\nValidationError.play = async ({ canvasElement }) => {\n  await fillSignin(canvasElement, 'demo!', '12345');\n\n  // Assert instant (no loading)\n  expect(screen.queryByTestId(TESTID_LOGIN_LOADING)).not.toBeInTheDocument();\n\n  // Assert incorrect login\n  await assertIncorrectLogin();\n};\n\nexport const ApiError = Template.bind({});\nApiError.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response\n      mockLoginResponse({\n        delay: 300,\n        status: 400,\n        body: { message: ERR_INVALID_REQUEST },\n      }),\n    ],\n  },\n};\nApiError.play = async ({ canvasElement }) => {\n  await fillSignin(canvasElement);\n\n  // Assert loading is visible\n  await screen.findByTestId(TESTID_LOGIN_LOADING);\n\n  // Assert incorrect login\n  await assertIncorrectLogin();\n};\n\nexport const InternalError = Template.bind({});\nInternalError.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response\n      mockLoginResponse({\n        delay: 300,\n        status: 500,\n        body: { message: ERR_INTERNAL },\n      }),\n    ],\n  },\n};\nInternalError.play = async ({ canvasElement }) => {\n  await fillSignin(canvasElement);\n\n  // Assert loading is visible\n  await screen.findByTestId(TESTID_LOGIN_LOADING);\n\n  // Assert incorrect login\n  await assertIncorrectLogin(true);\n};\n\nexport const Success = Template.bind({});\nSuccess.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response\n      mockLoginResponse({\n        delay: 300,\n        status: 200,\n        body: { message: MSG_LOGIN_OK_INFO, session: fakeSession() },\n      }),\n    ],\n  },\n};\nSuccess.play = async ({ canvasElement }) => {\n  await fillSignin(canvasElement);\n\n  // Assert loading is visible\n  await screen.findByTestId(TESTID_LOGIN_LOADING);\n\n  // Assert notification\n  await screen.findByText(MSG_LOGIN_OK);\n  expect(screen.getByText(MSG_LOGIN_OK_INFO)).toBeInTheDocument();\n\n  // Assert no red borders\n  expect(screen.getByPlaceholderText(PLACEHOLDER_PRINCIPAL)).not.toBeInvalid();\n  expect(\n    screen.getByPlaceholderText(PLACEHOLDER_PASSWORD).parentElement,\n  ).not.toBeInvalid();\n};\n",g={Default:{startLoc:{col:51,line:33},endLoc:{col:70,line:33},startBody:{col:51,line:33},endBody:{col:70,line:33}},Loading:{startLoc:{col:51,line:33},endLoc:{col:70,line:33},startBody:{col:51,line:33},endBody:{col:70,line:33}},ValidationError:{startLoc:{col:51,line:33},endLoc:{col:70,line:33},startBody:{col:51,line:33},endBody:{col:70,line:33}},ApiError:{startLoc:{col:51,line:33},endLoc:{col:70,line:33},startBody:{col:51,line:33},endBody:{col:70,line:33}},InternalError:{startLoc:{col:51,line:33},endLoc:{col:70,line:33},startBody:{col:51,line:33},endBody:{col:70,line:33}},Success:{startLoc:{col:51,line:33},endLoc:{col:70,line:33},startBody:{col:51,line:33},endBody:{col:70,line:33}}};let I={component:i.U};var x=function(){return(0,r.jsx)(i.U,{})},w=function(){var e=d(function(e,n,t){var r,o,i;return h(this,function(l){switch(l.label){case 0:return[4,(r=(0,a.uh)(e)).findByPlaceholderText(s.Rl)];case 1:return o=l.sent(),[4,r.findByPlaceholderText(s.P3)];case 2:return i=l.sent(),a.mV.type(o,n||"demo"),a.mV.type(i,t||"123456"),a.mV.keyboard("{Enter}"),[2]}})});return function(n,t,r){return e.apply(this,arguments)}}(),_=function(){var e=d(function(){var e,n=arguments;return h(this,function(t){switch(t.label){case 0:return e=n.length>0&&void 0!==n[0]&&n[0],[4,a.sp.findByText(s.fq)];case 1:if(t.sent(),(0,o.l)(a.sp.getByText(s.fq)).toBeInTheDocument(),(0,o.l)(a.sp.getByText(e?u.He:s.k7)).toBeInTheDocument(),!e)return[3,2];return(0,o.l)(a.sp.getByPlaceholderText(s.Rl)).not.toBeInvalid(),(0,o.l)(a.sp.getByPlaceholderText(s.P3).parentElement).not.toBeInvalid(),[3,4];case 2:return[4,(0,a.X_)(function(){(0,o.l)(a.sp.getByPlaceholderText(s.Rl)).toBeInvalid()})];case 3:t.sent(),(0,o.l)(a.sp.getByPlaceholderText(s.P3).parentElement).toBeInvalid(),t.label=4;case 4:return[2]}})});return function(){return e.apply(this,arguments)}}(),E=x.bind({});E.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0})]}},E.play=function(){var e=d(function(e){var n,t,r,i,l,u;return h(this,function(p){switch(p.label){case 0:return n=e.canvasElement,r=(t=(0,a.uh)(n)).getByPlaceholderText(s.Rl),i=t.getByPlaceholderText(s.P3),l=t.getByRole("button",{name:s.GL}),u=t.getByTestId(s.W4),[4,(0,c.J)(r,s.ZD[0])];case 1:return p.sent(),[4,(0,c.J)(i,b(f({},s.ZD[1]),{type:"password"}))];case 2:return p.sent(),(0,o.l)(l).toBeVisible(),(0,o.l)(u).toBeVisible(),(0,o.l)(t.getByText(s.pS)).toBeVisible(),[2]}})});return function(n){return e.apply(this,arguments)}}();var S=x.bind({});S.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.oG)({delay:5e4,status:500,body:{message:u.He}})]}},S.play=function(){var e=d(function(e){var n,t;return h(this,function(r){switch(r.label){case 0:return[4,w(n=e.canvasElement)];case 1:return r.sent(),t=(0,a.uh)(n),[4,(0,a.X_)(function(){(0,o.l)(t.getByTestId(s.VU)).toBeVisible()})];case 2:return r.sent(),[2]}})});return function(n){return e.apply(this,arguments)}}();var B=x.bind({});B.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.oG)({delay:1e4,status:400,body:{message:u.He}})]}},B.play=function(){var e=d(function(e){return h(this,function(n){switch(n.label){case 0:return[4,w(e.canvasElement,"demo!","12345")];case 1:return n.sent(),(0,o.l)(a.sp.queryByTestId(s.VU)).not.toBeInTheDocument(),[4,_()];case 2:return n.sent(),[2]}})});return function(n){return e.apply(this,arguments)}}();var T=x.bind({});T.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.oG)({delay:300,status:400,body:{message:u.cv}})]}},T.play=function(){var e=d(function(e){return h(this,function(n){switch(n.label){case 0:return[4,w(e.canvasElement)];case 1:return n.sent(),[4,a.sp.findByTestId(s.VU)];case 2:return n.sent(),[4,_()];case 3:return n.sent(),[2]}})});return function(n){return e.apply(this,arguments)}}();var O=x.bind({});O.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.oG)({delay:300,status:500,body:{message:u.He}})]}},O.play=function(){var e=d(function(e){return h(this,function(n){switch(n.label){case 0:return[4,w(e.canvasElement)];case 1:return n.sent(),[4,a.sp.findByTestId(s.VU)];case 2:return n.sent(),[4,_(!0)];case 3:return n.sent(),[2]}})});return function(n){return e.apply(this,arguments)}}();var L=x.bind({});L.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.oG)({delay:300,status:200,body:{message:s.R,session:(0,l.g0)()}})]}},L.play=function(){var e=d(function(e){return h(this,function(n){switch(n.label){case 0:return[4,w(e.canvasElement)];case 1:return n.sent(),[4,a.sp.findByTestId(s.VU)];case 2:return n.sent(),[4,a.sp.findByText(s.lp)];case 3:return n.sent(),(0,o.l)(a.sp.getByText(s.R)).toBeInTheDocument(),(0,o.l)(a.sp.getByPlaceholderText(s.Rl)).not.toBeInvalid(),(0,o.l)(a.sp.getByPlaceholderText(s.P3).parentElement).not.toBeInvalid(),[2]}})});return function(n){return e.apply(this,arguments)}}(),E.parameters=f({storySource:{source:"() => <LoginForm />"}},E.parameters),S.parameters=f({storySource:{source:"() => <LoginForm />"}},S.parameters),B.parameters=f({storySource:{source:"() => <LoginForm />"}},B.parameters),T.parameters=f({storySource:{source:"() => <LoginForm />"}},T.parameters),O.parameters=f({storySource:{source:"() => <LoginForm />"}},O.parameters),L.parameters=f({storySource:{source:"() => <LoginForm />"}},L.parameters)},"./apps/web/stories/auth/feature/signup-form.stories.tsx":(e,n,t)=>{"use strict";t.r(n),t.d(n,{ApiErrorEmail:()=>D,ApiErrorFirstname:()=>P,ApiErrorLastname:()=>A,ApiErrorPassword:()=>C,ApiErrorUsername:()=>R,Default:()=>E,InternalError:()=>N,Loading:()=>S,Success:()=>F,ValidationEmail:()=>L,ValidationFirstname:()=>B,ValidationLastname:()=>T,ValidationPassword:()=>k,ValidationUsername:()=>O,default:()=>I});var r=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),o=t("./node_modules/.pnpm/@storybook+jest@0.0.10_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/jest/dist/esm/index.js"),a=t("./node_modules/.pnpm/@storybook+testing-library@0.0.13_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/testing-library/dist/esm/index.js"),s=t("./libs/auth/core/src/index.ts"),i=t("./libs/auth/feature/src/index.ts"),l=t("./libs/auth/testutils/src/index.ts"),u=t("./libs/shared/core/src/index.ts"),c=t("./libs/shared/testutils/storybook/src/index.ts");function p(e,n,t,r,o,a,s){try{var i=e[a](s),l=i.value}catch(u){t(u);return}i.done?n(l):Promise.resolve(l).then(r,o)}function d(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function s(e){p(a,r,o,s,i,"next",e)}function i(e){p(a,r,o,s,i,"throw",e)}s(void 0)})}}function m(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){m(e,n,t[n])})}return e}function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function b(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e}var h=function(e,n){var t,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(e,s)}catch(i){a=[6,i],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},v="\nimport { expect } from '@storybook/jest';\nimport type { ComponentMeta, ComponentStory } from '@storybook/react';\nimport { screen, userEvent, waitFor, within } from '@storybook/testing-library';\n\nimport {\n  ARIA_SUBMIT_SIGNUP,\n  ERR_SIGNUP_FAILED,\n  MSG_SIGNUP_OK,\n  PLACEHOLDER_EMAIL,\n  PLACEHOLDER_FIRSTNAME,\n  PLACEHOLDER_LASTNAME,\n  PLACEHOLDER_PASSWORD,\n  PLACEHOLDER_USERNAME,\n  SignupPayload,\n  TESTID_LOGIN_LINK,\n  TESTID_SIGNUP_LOADING,\n  TEXT_SIGNUP_FOOTER,\n} from '@lihim/auth/core';\nimport { credentialInputs, nameInputs } from '@lihim/auth/core';\nimport { SignupForm } from '@lihim/auth/feature';\nimport {\n  fakeSession,\n  fakeSignupPayload,\n  mockSessionResponse,\n  mockSignupResponse,\n} from '@lihim/auth/testutils';\nimport { ERR_INTERNAL } from '@lihim/shared/core';\nimport { checkInputDefaults } from '@lihim/shared/testutils/storybook';\n\nexport default {\n  component: SignupForm,\n} as ComponentMeta<typeof SignupForm>;\n\nconst Template: ComponentStory<typeof SignupForm> = () => <SignupForm />;\n\nconst locateElements = (canvasElement: HTMLElement) => {\n  const canvas = within(canvasElement);\n\n  // Locate elements\n  const firstnameInput = canvas.getByPlaceholderText(PLACEHOLDER_FIRSTNAME);\n  const lastnameInput = canvas.getByPlaceholderText(PLACEHOLDER_LASTNAME);\n  const usernameInput = canvas.getByPlaceholderText(PLACEHOLDER_USERNAME);\n  const emailInput = canvas.getByPlaceholderText(PLACEHOLDER_EMAIL);\n  const passwordInput = canvas.getByPlaceholderText(PLACEHOLDER_PASSWORD);\n  const submitBtn = canvas.getByRole('button', {\n    name: ARIA_SUBMIT_SIGNUP,\n  });\n  const loginLink = canvas.getByTestId(TESTID_LOGIN_LINK);\n\n  return {\n    firstnameInput,\n    lastnameInput,\n    usernameInput,\n    emailInput,\n    passwordInput,\n    submitBtn,\n    loginLink,\n  };\n};\n\nconst fillupForm = async (\n  canvasElement: HTMLElement,\n  _payload?: Partial<SignupPayload>,\n) => {\n  // Valid payload with override\n  const payload: SignupPayload = {\n    ...fakeSignupPayload(),\n    ..._payload,\n  };\n\n  // Locate elements\n  const {\n    firstnameInput,\n    lastnameInput,\n    usernameInput,\n    emailInput,\n    passwordInput,\n    submitBtn,\n  } = locateElements(canvasElement);\n\n  // Fillup form\n  await userEvent.type(firstnameInput, payload.firstname);\n  await userEvent.type(lastnameInput, payload.lastname);\n  await userEvent.type(usernameInput, payload.username);\n  await userEvent.type(emailInput, payload.email);\n  await userEvent.type(passwordInput, payload.password);\n  await userEvent.click(submitBtn);\n};\n\nexport const Default = Template.bind({});\nDefault.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n    ],\n  },\n};\nDefault.play = async ({ canvasElement }) => {\n  // Locate elements\n  const {\n    firstnameInput,\n    lastnameInput,\n    usernameInput,\n    emailInput,\n    passwordInput,\n    submitBtn,\n    loginLink,\n  } = locateElements(canvasElement);\n\n  // Assertions\n  await checkInputDefaults(firstnameInput, nameInputs[0]);\n  await checkInputDefaults(lastnameInput, nameInputs[1]);\n  await checkInputDefaults(usernameInput, credentialInputs[0]);\n  await checkInputDefaults(emailInput, credentialInputs[1]);\n  await checkInputDefaults(passwordInput, {\n    ...credentialInputs[2],\n    type: 'password',\n  });\n  expect(submitBtn).toBeVisible();\n  expect(loginLink).toBeVisible();\n  expect(screen.getByText(TEXT_SIGNUP_FOOTER)).toBeVisible();\n};\n\nexport const Loading = Template.bind({});\nLoading.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock long running request\n      mockSignupResponse({\n        delay: 50_000,\n        status: 500,\n        body: { message: ERR_INTERNAL },\n      }),\n    ],\n  },\n};\nLoading.play = async ({ canvasElement }) => {\n  await fillupForm(canvasElement);\n\n  const canvas = within(canvasElement);\n  await waitFor(() => {\n    expect(canvas.getByTestId(TESTID_SIGNUP_LOADING)).toBeVisible();\n  });\n};\n\nexport const ValidationFirstname = Template.bind({});\nValidationFirstname.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response (long delay since validation is instant)\n      // Should not display loading overlay\n      mockSignupResponse({\n        delay: 10_000,\n        status: 400,\n        body: { message: ERR_INTERNAL },\n      }),\n    ],\n  },\n};\nValidationFirstname.play = async ({ canvasElement }) => {\n  await fillupForm(canvasElement, { firstname: 'John!' });\n\n  // Assert instant (no loading)\n  expect(screen.queryByTestId(TESTID_SIGNUP_LOADING)).not.toBeInTheDocument();\n\n  // Locate elements\n  const {\n    firstnameInput,\n    lastnameInput,\n    usernameInput,\n    emailInput,\n    passwordInput,\n  } = locateElements(canvasElement);\n\n  // Assert invalid firstname field\n  await waitFor(() => {\n    expect(firstnameInput).toBeInvalid();\n  });\n\n  // Assert all other inputs not to be invalid\n  expect(lastnameInput).not.toBeInvalid();\n  expect(usernameInput).not.toBeInvalid();\n  expect(emailInput).not.toBeInvalid();\n  expect(passwordInput.parentElement).not.toBeInvalid();\n};\n\nexport const ValidationLastname = Template.bind({});\nValidationLastname.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response (long delay since validation is instant)\n      // Should not display loading overlay\n      mockSignupResponse({\n        delay: 10_000,\n        status: 400,\n        body: { message: ERR_INTERNAL },\n      }),\n    ],\n  },\n};\nValidationLastname.play = async ({ canvasElement }) => {\n  await fillupForm(canvasElement, { lastname: 'Smith!' });\n\n  // Assert instant (no loading)\n  expect(screen.queryByTestId(TESTID_SIGNUP_LOADING)).not.toBeInTheDocument();\n\n  // Locate elements\n  const {\n    firstnameInput,\n    lastnameInput,\n    usernameInput,\n    emailInput,\n    passwordInput,\n  } = locateElements(canvasElement);\n\n  // Assert invalid firstname field\n  await waitFor(() => {\n    expect(lastnameInput).toBeInvalid();\n  });\n\n  // Assert all other inputs not to be invalid\n  expect(firstnameInput).not.toBeInvalid();\n  expect(usernameInput).not.toBeInvalid();\n  expect(emailInput).not.toBeInvalid();\n  expect(passwordInput.parentElement).not.toBeInvalid();\n};\n\nexport const ValidationUsername = Template.bind({});\nValidationUsername.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response (long delay since validation is instant)\n      // Should not display loading overlay\n      mockSignupResponse({\n        delay: 10_000,\n        status: 400,\n        body: { message: ERR_INTERNAL },\n      }),\n    ],\n  },\n};\nValidationUsername.play = async ({ canvasElement }) => {\n  await fillupForm(canvasElement, { username: 'demo!' });\n\n  // Assert instant (no loading)\n  expect(screen.queryByTestId(TESTID_SIGNUP_LOADING)).not.toBeInTheDocument();\n\n  // Locate elements\n  const {\n    firstnameInput,\n    lastnameInput,\n    usernameInput,\n    emailInput,\n    passwordInput,\n  } = locateElements(canvasElement);\n\n  // Assert invalid firstname field\n  await waitFor(() => {\n    expect(usernameInput).toBeInvalid();\n  });\n\n  // Assert all other inputs not to be invalid\n  expect(firstnameInput).not.toBeInvalid();\n  expect(lastnameInput).not.toBeInvalid();\n  expect(emailInput).not.toBeInvalid();\n  expect(passwordInput.parentElement).not.toBeInvalid();\n};\n\nexport const ValidationEmail = Template.bind({});\nValidationEmail.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response (long delay since validation is instant)\n      // Should not display loading overlay\n      mockSignupResponse({\n        delay: 10_000,\n        status: 400,\n        body: { message: ERR_INTERNAL },\n      }),\n    ],\n  },\n};\nValidationEmail.play = async ({ canvasElement }) => {\n  await fillupForm(canvasElement, { email: 'x@i.o' });\n\n  // Assert instant (no loading)\n  expect(screen.queryByTestId(TESTID_SIGNUP_LOADING)).not.toBeInTheDocument();\n\n  // Locate elements\n  const {\n    firstnameInput,\n    lastnameInput,\n    usernameInput,\n    emailInput,\n    passwordInput,\n  } = locateElements(canvasElement);\n\n  // Assert invalid firstname field\n  await waitFor(() => {\n    expect(emailInput).toBeInvalid();\n  });\n\n  // Assert all other inputs not to be invalid\n  expect(firstnameInput).not.toBeInvalid();\n  expect(lastnameInput).not.toBeInvalid();\n  expect(usernameInput).not.toBeInvalid();\n  expect(passwordInput.parentElement).not.toBeInvalid();\n};\n\nexport const ValidationPassword = Template.bind({});\nValidationPassword.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response (long delay since validation is instant)\n      // Should not display loading overlay\n      mockSignupResponse({\n        delay: 10_000,\n        status: 400,\n        body: { message: ERR_INTERNAL },\n      }),\n    ],\n  },\n};\nValidationPassword.play = async ({ canvasElement }) => {\n  await fillupForm(canvasElement, { password: '12345' });\n\n  // Assert instant (no loading)\n  expect(screen.queryByTestId(TESTID_SIGNUP_LOADING)).not.toBeInTheDocument();\n\n  // Locate elements\n  const {\n    firstnameInput,\n    lastnameInput,\n    usernameInput,\n    emailInput,\n    passwordInput,\n  } = locateElements(canvasElement);\n\n  // Assert invalid firstname field\n  await waitFor(() => {\n    expect(passwordInput.parentElement).toBeInvalid();\n  });\n\n  // Assert all other inputs not to be invalid\n  expect(firstnameInput).not.toBeInvalid();\n  expect(lastnameInput).not.toBeInvalid();\n  expect(usernameInput).not.toBeInvalid();\n  expect(emailInput).not.toBeInvalid();\n};\n\nconst API_ERROR = 'Test api error';\n\nexport const ApiErrorFirstname = Template.bind({});\nApiErrorFirstname.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response (long delay since validation is instant)\n      // Should not display loading overlay\n      mockSignupResponse({\n        delay: 300,\n        status: 400,\n        body: { field: 'firstname', message: API_ERROR },\n      }),\n    ],\n  },\n};\nApiErrorFirstname.play = async ({ canvasElement }) => {\n  await fillupForm(canvasElement);\n\n  // Loading should appear\n  await screen.findByTestId(TESTID_SIGNUP_LOADING);\n\n  // Locate elements\n  const {\n    firstnameInput,\n    lastnameInput,\n    usernameInput,\n    emailInput,\n    passwordInput,\n  } = locateElements(canvasElement);\n\n  // Assert invalid firstname field\n  await waitFor(() => {\n    expect(firstnameInput).toBeInvalid();\n  });\n\n  // Assert all other inputs not to be invalid\n  expect(lastnameInput).not.toBeInvalid();\n  expect(usernameInput).not.toBeInvalid();\n  expect(emailInput).not.toBeInvalid();\n  expect(passwordInput.parentElement).not.toBeInvalid();\n\n  // Assert notification\n  expect(screen.getByText(ERR_SIGNUP_FAILED)).toBeInTheDocument();\n  expect(screen.getByText(API_ERROR)).toBeInTheDocument();\n};\n\nexport const ApiErrorLastname = Template.bind({});\nApiErrorLastname.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response (long delay since validation is instant)\n      // Should not display loading overlay\n      mockSignupResponse({\n        delay: 300,\n        status: 400,\n        body: { field: 'lastname', message: API_ERROR },\n      }),\n    ],\n  },\n};\nApiErrorLastname.play = async ({ canvasElement }) => {\n  await fillupForm(canvasElement);\n\n  // Loading should appear\n  await screen.findByTestId(TESTID_SIGNUP_LOADING);\n\n  // Locate elements\n  const {\n    firstnameInput,\n    lastnameInput,\n    usernameInput,\n    emailInput,\n    passwordInput,\n  } = locateElements(canvasElement);\n\n  // Assert invalid firstname field\n  await waitFor(() => {\n    expect(lastnameInput).toBeInvalid();\n  });\n\n  // Assert all other inputs not to be invalid\n  expect(firstnameInput).not.toBeInvalid();\n  expect(usernameInput).not.toBeInvalid();\n  expect(emailInput).not.toBeInvalid();\n  expect(passwordInput.parentElement).not.toBeInvalid();\n\n  // Assert notification\n  expect(screen.getByText(ERR_SIGNUP_FAILED)).toBeInTheDocument();\n  expect(screen.getByText(API_ERROR)).toBeInTheDocument();\n};\n\nexport const ApiErrorUsername = Template.bind({});\nApiErrorUsername.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response (long delay since validation is instant)\n      // Should not display loading overlay\n      mockSignupResponse({\n        delay: 300,\n        status: 400,\n        body: { field: 'username', message: API_ERROR },\n      }),\n    ],\n  },\n};\nApiErrorUsername.play = async ({ canvasElement }) => {\n  await fillupForm(canvasElement);\n\n  // Loading should appear\n  await screen.findByTestId(TESTID_SIGNUP_LOADING);\n\n  // Locate elements\n  const {\n    firstnameInput,\n    lastnameInput,\n    usernameInput,\n    emailInput,\n    passwordInput,\n  } = locateElements(canvasElement);\n\n  // Assert invalid firstname field\n  await waitFor(() => {\n    expect(usernameInput).toBeInvalid();\n  });\n\n  // Assert all other inputs not to be invalid\n  expect(firstnameInput).not.toBeInvalid();\n  expect(lastnameInput).not.toBeInvalid();\n  expect(emailInput).not.toBeInvalid();\n  expect(passwordInput.parentElement).not.toBeInvalid();\n\n  // Assert notification\n  expect(screen.getByText(ERR_SIGNUP_FAILED)).toBeInTheDocument();\n  expect(screen.getAllByText(API_ERROR).length).toBe(2);\n};\n\nexport const ApiErrorEmail = Template.bind({});\nApiErrorEmail.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response (long delay since validation is instant)\n      // Should not display loading overlay\n      mockSignupResponse({\n        delay: 300,\n        status: 400,\n        body: { field: 'email', message: API_ERROR },\n      }),\n    ],\n  },\n};\nApiErrorEmail.play = async ({ canvasElement }) => {\n  await fillupForm(canvasElement);\n\n  // Loading should appear\n  await screen.findByTestId(TESTID_SIGNUP_LOADING);\n\n  // Locate elements\n  const {\n    firstnameInput,\n    lastnameInput,\n    usernameInput,\n    emailInput,\n    passwordInput,\n  } = locateElements(canvasElement);\n\n  // Assert invalid firstname field\n  await waitFor(() => {\n    expect(emailInput).toBeInvalid();\n  });\n\n  // Assert all other inputs not to be invalid\n  expect(firstnameInput).not.toBeInvalid();\n  expect(lastnameInput).not.toBeInvalid();\n  expect(usernameInput).not.toBeInvalid();\n  expect(passwordInput.parentElement).not.toBeInvalid();\n\n  // Assert notification\n  expect(screen.getByText(ERR_SIGNUP_FAILED)).toBeInTheDocument();\n  expect(screen.getAllByText(API_ERROR).length).toBe(2);\n};\n\nexport const ApiErrorPassword = Template.bind({});\nApiErrorPassword.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response (long delay since validation is instant)\n      // Should not display loading overlay\n      mockSignupResponse({\n        delay: 300,\n        status: 400,\n        body: { field: 'password', message: API_ERROR },\n      }),\n    ],\n  },\n};\nApiErrorPassword.play = async ({ canvasElement }) => {\n  await fillupForm(canvasElement);\n\n  // Loading should appear\n  await screen.findByTestId(TESTID_SIGNUP_LOADING);\n\n  // Locate elements\n  const {\n    firstnameInput,\n    lastnameInput,\n    usernameInput,\n    emailInput,\n    passwordInput,\n  } = locateElements(canvasElement);\n\n  // Assert invalid firstname field\n  await waitFor(() => {\n    expect(passwordInput.parentElement).toBeInvalid();\n  });\n\n  // Assert all other inputs not to be invalid\n  expect(firstnameInput).not.toBeInvalid();\n  expect(lastnameInput).not.toBeInvalid();\n  expect(usernameInput).not.toBeInvalid();\n  expect(emailInput).not.toBeInvalid();\n\n  // Assert notification\n  expect(screen.getByText(ERR_SIGNUP_FAILED)).toBeInTheDocument();\n  expect(screen.getAllByText(API_ERROR).length).toBe(2);\n};\n\nexport const InternalError = Template.bind({});\nInternalError.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response (long delay since validation is instant)\n      // Should not display loading overlay\n      mockSignupResponse({\n        delay: 300,\n        status: 400,\n        body: { message: ERR_INTERNAL },\n      }),\n    ],\n  },\n};\nInternalError.play = async ({ canvasElement }) => {\n  await fillupForm(canvasElement);\n\n  // Loading should appear\n  await screen.findByTestId(TESTID_SIGNUP_LOADING);\n\n  // Locate elements\n  const {\n    firstnameInput,\n    lastnameInput,\n    usernameInput,\n    emailInput,\n    passwordInput,\n  } = locateElements(canvasElement);\n\n  // Assert notification\n  await waitFor(() => {\n    expect(screen.getByText(ERR_SIGNUP_FAILED)).toBeInTheDocument();\n  });\n  expect(screen.getByText(ERR_INTERNAL)).toBeInTheDocument();\n\n  // Assert all inputs not to be invalid\n  expect(firstnameInput).not.toBeInvalid();\n  expect(lastnameInput).not.toBeInvalid();\n  expect(usernameInput).not.toBeInvalid();\n  expect(emailInput).not.toBeInvalid();\n  expect(passwordInput.parentElement).not.toBeInvalid();\n};\n\nexport const Success = Template.bind({});\nSuccess.parameters = {\n  msw: {\n    handlers: [\n      // Mock anon session\n      mockSessionResponse(200, { isAnon: true }),\n      // Mock error response (long delay since validation is instant)\n      // Should not display loading overlay\n      mockSignupResponse({\n        delay: 300,\n        status: 200,\n        body: { message: 'Welcome test-user!', session: fakeSession() },\n      }),\n    ],\n  },\n};\nSuccess.play = async ({ canvasElement }) => {\n  await fillupForm(canvasElement);\n\n  // Loading should appear\n  await screen.findByTestId(TESTID_SIGNUP_LOADING);\n\n  // Locate elements\n  const {\n    firstnameInput,\n    lastnameInput,\n    usernameInput,\n    emailInput,\n    passwordInput,\n  } = locateElements(canvasElement);\n\n  // Assert notification\n  await waitFor(() => {\n    expect(screen.getByText(MSG_SIGNUP_OK)).toBeInTheDocument();\n  });\n  expect(screen.getByText('Welcome test-user!')).toBeInTheDocument();\n\n  // Assert all inputs not to be invalid\n  expect(firstnameInput).not.toBeInvalid();\n  expect(lastnameInput).not.toBeInvalid();\n  expect(usernameInput).not.toBeInvalid();\n  expect(emailInput).not.toBeInvalid();\n  expect(passwordInput.parentElement).not.toBeInvalid();\n};\n",g={Default:{startLoc:{col:52,line:35},endLoc:{col:72,line:35},startBody:{col:52,line:35},endBody:{col:72,line:35}},Loading:{startLoc:{col:52,line:35},endLoc:{col:72,line:35},startBody:{col:52,line:35},endBody:{col:72,line:35}},ValidationFirstname:{startLoc:{col:52,line:35},endLoc:{col:72,line:35},startBody:{col:52,line:35},endBody:{col:72,line:35}},ValidationLastname:{startLoc:{col:52,line:35},endLoc:{col:72,line:35},startBody:{col:52,line:35},endBody:{col:72,line:35}},ValidationUsername:{startLoc:{col:52,line:35},endLoc:{col:72,line:35},startBody:{col:52,line:35},endBody:{col:72,line:35}},ValidationEmail:{startLoc:{col:52,line:35},endLoc:{col:72,line:35},startBody:{col:52,line:35},endBody:{col:72,line:35}},ValidationPassword:{startLoc:{col:52,line:35},endLoc:{col:72,line:35},startBody:{col:52,line:35},endBody:{col:72,line:35}},ApiErrorFirstname:{startLoc:{col:52,line:35},endLoc:{col:72,line:35},startBody:{col:52,line:35},endBody:{col:72,line:35}},ApiErrorLastname:{startLoc:{col:52,line:35},endLoc:{col:72,line:35},startBody:{col:52,line:35},endBody:{col:72,line:35}},ApiErrorUsername:{startLoc:{col:52,line:35},endLoc:{col:72,line:35},startBody:{col:52,line:35},endBody:{col:72,line:35}},ApiErrorEmail:{startLoc:{col:52,line:35},endLoc:{col:72,line:35},startBody:{col:52,line:35},endBody:{col:72,line:35}},ApiErrorPassword:{startLoc:{col:52,line:35},endLoc:{col:72,line:35},startBody:{col:52,line:35},endBody:{col:72,line:35}},InternalError:{startLoc:{col:52,line:35},endLoc:{col:72,line:35},startBody:{col:52,line:35},endBody:{col:72,line:35}},Success:{startLoc:{col:52,line:35},endLoc:{col:72,line:35},startBody:{col:52,line:35},endBody:{col:72,line:35}}};let I={component:i.C};var x=function(){return(0,r.jsx)(i.C,{})},w=function(e){var n=(0,a.uh)(e);return{firstnameInput:n.getByPlaceholderText(s.Zl),lastnameInput:n.getByPlaceholderText(s.ro),usernameInput:n.getByPlaceholderText(s.pU),emailInput:n.getByPlaceholderText(s.jw),passwordInput:n.getByPlaceholderText(s.P3),submitBtn:n.getByRole("button",{name:s.dx}),loginLink:n.getByTestId(s.kw)}},_=function(){var e=d(function(e,n){var t,r,o,s,i,u,c,p;return h(this,function(d){switch(d.label){case 0:return t=f({},(0,l.$5)(),n),o=(r=w(e)).firstnameInput,s=r.lastnameInput,i=r.usernameInput,u=r.emailInput,c=r.passwordInput,p=r.submitBtn,[4,a.mV.type(o,t.firstname)];case 1:return d.sent(),[4,a.mV.type(s,t.lastname)];case 2:return d.sent(),[4,a.mV.type(i,t.username)];case 3:return d.sent(),[4,a.mV.type(u,t.email)];case 4:return d.sent(),[4,a.mV.type(c,t.password)];case 5:return d.sent(),[4,a.mV.click(p)];case 6:return d.sent(),[2]}})});return function(n,t){return e.apply(this,arguments)}}(),E=x.bind({});E.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0})]}},E.play=function(){var e=d(function(e){var n,t,r,i,l,u,p,d;return h(this,function(m){switch(m.label){case 0:return t=(n=w(e.canvasElement)).firstnameInput,r=n.lastnameInput,i=n.usernameInput,l=n.emailInput,u=n.passwordInput,p=n.submitBtn,d=n.loginLink,[4,(0,c.J)(t,s.DZ[0])];case 1:return m.sent(),[4,(0,c.J)(r,s.DZ[1])];case 2:return m.sent(),[4,(0,c.J)(i,s.Qi[0])];case 3:return m.sent(),[4,(0,c.J)(l,s.Qi[1])];case 4:return m.sent(),[4,(0,c.J)(u,b(f({},s.Qi[2]),{type:"password"}))];case 5:return m.sent(),(0,o.l)(p).toBeVisible(),(0,o.l)(d).toBeVisible(),(0,o.l)(a.sp.getByText(s.IQ)).toBeVisible(),[2]}})});return function(n){return e.apply(this,arguments)}}();var S=x.bind({});S.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.uO)({delay:5e4,status:500,body:{message:u.He}})]}},S.play=function(){var e=d(function(e){var n,t;return h(this,function(r){switch(r.label){case 0:return[4,_(n=e.canvasElement)];case 1:return r.sent(),t=(0,a.uh)(n),[4,(0,a.X_)(function(){(0,o.l)(t.getByTestId(s.vj)).toBeVisible()})];case 2:return r.sent(),[2]}})});return function(n){return e.apply(this,arguments)}}();var B=x.bind({});B.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.uO)({delay:1e4,status:400,body:{message:u.He}})]}},B.play=function(){var e=d(function(e){var n,t,r,i,l,u,c;return h(this,function(p){switch(p.label){case 0:return[4,_(n=e.canvasElement,{firstname:"John!"})];case 1:return p.sent(),(0,o.l)(a.sp.queryByTestId(s.vj)).not.toBeInTheDocument(),r=(t=w(n)).firstnameInput,i=t.lastnameInput,l=t.usernameInput,u=t.emailInput,c=t.passwordInput,[4,(0,a.X_)(function(){(0,o.l)(r).toBeInvalid()})];case 2:return p.sent(),(0,o.l)(i).not.toBeInvalid(),(0,o.l)(l).not.toBeInvalid(),(0,o.l)(u).not.toBeInvalid(),(0,o.l)(c.parentElement).not.toBeInvalid(),[2]}})});return function(n){return e.apply(this,arguments)}}();var T=x.bind({});T.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.uO)({delay:1e4,status:400,body:{message:u.He}})]}},T.play=function(){var e=d(function(e){var n,t,r,i,l,u,c;return h(this,function(p){switch(p.label){case 0:return[4,_(n=e.canvasElement,{lastname:"Smith!"})];case 1:return p.sent(),(0,o.l)(a.sp.queryByTestId(s.vj)).not.toBeInTheDocument(),r=(t=w(n)).firstnameInput,i=t.lastnameInput,l=t.usernameInput,u=t.emailInput,c=t.passwordInput,[4,(0,a.X_)(function(){(0,o.l)(i).toBeInvalid()})];case 2:return p.sent(),(0,o.l)(r).not.toBeInvalid(),(0,o.l)(l).not.toBeInvalid(),(0,o.l)(u).not.toBeInvalid(),(0,o.l)(c.parentElement).not.toBeInvalid(),[2]}})});return function(n){return e.apply(this,arguments)}}();var O=x.bind({});O.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.uO)({delay:1e4,status:400,body:{message:u.He}})]}},O.play=function(){var e=d(function(e){var n,t,r,i,l,u,c;return h(this,function(p){switch(p.label){case 0:return[4,_(n=e.canvasElement,{username:"demo!"})];case 1:return p.sent(),(0,o.l)(a.sp.queryByTestId(s.vj)).not.toBeInTheDocument(),r=(t=w(n)).firstnameInput,i=t.lastnameInput,l=t.usernameInput,u=t.emailInput,c=t.passwordInput,[4,(0,a.X_)(function(){(0,o.l)(l).toBeInvalid()})];case 2:return p.sent(),(0,o.l)(r).not.toBeInvalid(),(0,o.l)(i).not.toBeInvalid(),(0,o.l)(u).not.toBeInvalid(),(0,o.l)(c.parentElement).not.toBeInvalid(),[2]}})});return function(n){return e.apply(this,arguments)}}();var L=x.bind({});L.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.uO)({delay:1e4,status:400,body:{message:u.He}})]}},L.play=function(){var e=d(function(e){var n,t,r,i,l,u,c;return h(this,function(p){switch(p.label){case 0:return[4,_(n=e.canvasElement,{email:"x@i.o"})];case 1:return p.sent(),(0,o.l)(a.sp.queryByTestId(s.vj)).not.toBeInTheDocument(),r=(t=w(n)).firstnameInput,i=t.lastnameInput,l=t.usernameInput,u=t.emailInput,c=t.passwordInput,[4,(0,a.X_)(function(){(0,o.l)(u).toBeInvalid()})];case 2:return p.sent(),(0,o.l)(r).not.toBeInvalid(),(0,o.l)(i).not.toBeInvalid(),(0,o.l)(l).not.toBeInvalid(),(0,o.l)(c.parentElement).not.toBeInvalid(),[2]}})});return function(n){return e.apply(this,arguments)}}();var k=x.bind({});k.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.uO)({delay:1e4,status:400,body:{message:u.He}})]}},k.play=function(){var e=d(function(e){var n,t,r,i,l,u,c;return h(this,function(p){switch(p.label){case 0:return[4,_(n=e.canvasElement,{password:"12345"})];case 1:return p.sent(),(0,o.l)(a.sp.queryByTestId(s.vj)).not.toBeInTheDocument(),r=(t=w(n)).firstnameInput,i=t.lastnameInput,l=t.usernameInput,u=t.emailInput,c=t.passwordInput,[4,(0,a.X_)(function(){(0,o.l)(c.parentElement).toBeInvalid()})];case 2:return p.sent(),(0,o.l)(r).not.toBeInvalid(),(0,o.l)(i).not.toBeInvalid(),(0,o.l)(l).not.toBeInvalid(),(0,o.l)(u).not.toBeInvalid(),[2]}})});return function(n){return e.apply(this,arguments)}}();var j="Test api error",P=x.bind({});P.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.uO)({delay:300,status:400,body:{field:"firstname",message:j}})]}},P.play=function(){var e=d(function(e){var n,t,r,i,l,u,c;return h(this,function(p){switch(p.label){case 0:return[4,_(n=e.canvasElement)];case 1:return p.sent(),[4,a.sp.findByTestId(s.vj)];case 2:return p.sent(),r=(t=w(n)).firstnameInput,i=t.lastnameInput,l=t.usernameInput,u=t.emailInput,c=t.passwordInput,[4,(0,a.X_)(function(){(0,o.l)(r).toBeInvalid()})];case 3:return p.sent(),(0,o.l)(i).not.toBeInvalid(),(0,o.l)(l).not.toBeInvalid(),(0,o.l)(u).not.toBeInvalid(),(0,o.l)(c.parentElement).not.toBeInvalid(),(0,o.l)(a.sp.getByText(s.Ss)).toBeInTheDocument(),(0,o.l)(a.sp.getByText(j)).toBeInTheDocument(),[2]}})});return function(n){return e.apply(this,arguments)}}();var A=x.bind({});A.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.uO)({delay:300,status:400,body:{field:"lastname",message:j}})]}},A.play=function(){var e=d(function(e){var n,t,r,i,l,u,c;return h(this,function(p){switch(p.label){case 0:return[4,_(n=e.canvasElement)];case 1:return p.sent(),[4,a.sp.findByTestId(s.vj)];case 2:return p.sent(),r=(t=w(n)).firstnameInput,i=t.lastnameInput,l=t.usernameInput,u=t.emailInput,c=t.passwordInput,[4,(0,a.X_)(function(){(0,o.l)(i).toBeInvalid()})];case 3:return p.sent(),(0,o.l)(r).not.toBeInvalid(),(0,o.l)(l).not.toBeInvalid(),(0,o.l)(u).not.toBeInvalid(),(0,o.l)(c.parentElement).not.toBeInvalid(),(0,o.l)(a.sp.getByText(s.Ss)).toBeInTheDocument(),(0,o.l)(a.sp.getByText(j)).toBeInTheDocument(),[2]}})});return function(n){return e.apply(this,arguments)}}();var R=x.bind({});R.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.uO)({delay:300,status:400,body:{field:"username",message:j}})]}},R.play=function(){var e=d(function(e){var n,t,r,i,l,u,c;return h(this,function(p){switch(p.label){case 0:return[4,_(n=e.canvasElement)];case 1:return p.sent(),[4,a.sp.findByTestId(s.vj)];case 2:return p.sent(),r=(t=w(n)).firstnameInput,i=t.lastnameInput,l=t.usernameInput,u=t.emailInput,c=t.passwordInput,[4,(0,a.X_)(function(){(0,o.l)(l).toBeInvalid()})];case 3:return p.sent(),(0,o.l)(r).not.toBeInvalid(),(0,o.l)(i).not.toBeInvalid(),(0,o.l)(u).not.toBeInvalid(),(0,o.l)(c.parentElement).not.toBeInvalid(),(0,o.l)(a.sp.getByText(s.Ss)).toBeInTheDocument(),(0,o.l)(a.sp.getAllByText(j).length).toBe(2),[2]}})});return function(n){return e.apply(this,arguments)}}();var D=x.bind({});D.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.uO)({delay:300,status:400,body:{field:"email",message:j}})]}},D.play=function(){var e=d(function(e){var n,t,r,i,l,u,c;return h(this,function(p){switch(p.label){case 0:return[4,_(n=e.canvasElement)];case 1:return p.sent(),[4,a.sp.findByTestId(s.vj)];case 2:return p.sent(),r=(t=w(n)).firstnameInput,i=t.lastnameInput,l=t.usernameInput,u=t.emailInput,c=t.passwordInput,[4,(0,a.X_)(function(){(0,o.l)(u).toBeInvalid()})];case 3:return p.sent(),(0,o.l)(r).not.toBeInvalid(),(0,o.l)(i).not.toBeInvalid(),(0,o.l)(l).not.toBeInvalid(),(0,o.l)(c.parentElement).not.toBeInvalid(),(0,o.l)(a.sp.getByText(s.Ss)).toBeInTheDocument(),(0,o.l)(a.sp.getAllByText(j).length).toBe(2),[2]}})});return function(n){return e.apply(this,arguments)}}();var C=x.bind({});C.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.uO)({delay:300,status:400,body:{field:"password",message:j}})]}},C.play=function(){var e=d(function(e){var n,t,r,i,l,u,c;return h(this,function(p){switch(p.label){case 0:return[4,_(n=e.canvasElement)];case 1:return p.sent(),[4,a.sp.findByTestId(s.vj)];case 2:return p.sent(),r=(t=w(n)).firstnameInput,i=t.lastnameInput,l=t.usernameInput,u=t.emailInput,c=t.passwordInput,[4,(0,a.X_)(function(){(0,o.l)(c.parentElement).toBeInvalid()})];case 3:return p.sent(),(0,o.l)(r).not.toBeInvalid(),(0,o.l)(i).not.toBeInvalid(),(0,o.l)(l).not.toBeInvalid(),(0,o.l)(u).not.toBeInvalid(),(0,o.l)(a.sp.getByText(s.Ss)).toBeInTheDocument(),(0,o.l)(a.sp.getAllByText(j).length).toBe(2),[2]}})});return function(n){return e.apply(this,arguments)}}();var N=x.bind({});N.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.uO)({delay:300,status:400,body:{message:u.He}})]}},N.play=function(){var e=d(function(e){var n,t,r,i,l,c,p;return h(this,function(d){switch(d.label){case 0:return[4,_(n=e.canvasElement)];case 1:return d.sent(),[4,a.sp.findByTestId(s.vj)];case 2:return d.sent(),r=(t=w(n)).firstnameInput,i=t.lastnameInput,l=t.usernameInput,c=t.emailInput,p=t.passwordInput,[4,(0,a.X_)(function(){(0,o.l)(a.sp.getByText(s.Ss)).toBeInTheDocument()})];case 3:return d.sent(),(0,o.l)(a.sp.getByText(u.He)).toBeInTheDocument(),(0,o.l)(r).not.toBeInvalid(),(0,o.l)(i).not.toBeInvalid(),(0,o.l)(l).not.toBeInvalid(),(0,o.l)(c).not.toBeInvalid(),(0,o.l)(p.parentElement).not.toBeInvalid(),[2]}})});return function(n){return e.apply(this,arguments)}}();var F=x.bind({});F.parameters={msw:{handlers:[(0,l.a2)(200,{isAnon:!0}),(0,l.uO)({delay:300,status:200,body:{message:"Welcome test-user!",session:(0,l.g0)()}})]}},F.play=function(){var e=d(function(e){var n,t,r,i,l,u,c;return h(this,function(p){switch(p.label){case 0:return[4,_(n=e.canvasElement)];case 1:return p.sent(),[4,a.sp.findByTestId(s.vj)];case 2:return p.sent(),r=(t=w(n)).firstnameInput,i=t.lastnameInput,l=t.usernameInput,u=t.emailInput,c=t.passwordInput,[4,(0,a.X_)(function(){(0,o.l)(a.sp.getByText(s.C9)).toBeInTheDocument()})];case 3:return p.sent(),(0,o.l)(a.sp.getByText("Welcome test-user!")).toBeInTheDocument(),(0,o.l)(r).not.toBeInvalid(),(0,o.l)(i).not.toBeInvalid(),(0,o.l)(l).not.toBeInvalid(),(0,o.l)(u).not.toBeInvalid(),(0,o.l)(c.parentElement).not.toBeInvalid(),[2]}})});return function(n){return e.apply(this,arguments)}}(),E.parameters=f({storySource:{source:"() => <SignupForm />"}},E.parameters),S.parameters=f({storySource:{source:"() => <SignupForm />"}},S.parameters),B.parameters=f({storySource:{source:"() => <SignupForm />"}},B.parameters),T.parameters=f({storySource:{source:"() => <SignupForm />"}},T.parameters),O.parameters=f({storySource:{source:"() => <SignupForm />"}},O.parameters),L.parameters=f({storySource:{source:"() => <SignupForm />"}},L.parameters),k.parameters=f({storySource:{source:"() => <SignupForm />"}},k.parameters),P.parameters=f({storySource:{source:"() => <SignupForm />"}},P.parameters),A.parameters=f({storySource:{source:"() => <SignupForm />"}},A.parameters),R.parameters=f({storySource:{source:"() => <SignupForm />"}},R.parameters),D.parameters=f({storySource:{source:"() => <SignupForm />"}},D.parameters),C.parameters=f({storySource:{source:"() => <SignupForm />"}},C.parameters),N.parameters=f({storySource:{source:"() => <SignupForm />"}},N.parameters),F.parameters=f({storySource:{source:"() => <SignupForm />"}},F.parameters)},"./apps/web/stories/auth/ui/login-form-skeleton.stories.tsx":(e,n,t)=>{"use strict";t.r(n),t.d(n,{Default:()=>v,default:()=>h});var r=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),o=t("./node_modules/.pnpm/react-hook-form@7.41.5_react@18.2.0/node_modules/react-hook-form/dist/index.esm.mjs"),a=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Group/Group.js"),s=t("./node_modules/.pnpm/@storybook+jest@0.0.10_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/jest/dist/esm/index.js"),i=t("./node_modules/.pnpm/@storybook+testing-library@0.0.13_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/testing-library/dist/esm/index.js"),l=t("./libs/auth/core/src/index.ts"),u=t("./libs/auth/ui/src/index.ts");function c(e,n,t,r,o,a,s){try{var i=e[a](s),l=i.value}catch(u){t(u);return}i.done?n(l):Promise.resolve(l).then(r,o)}function p(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function s(e){c(a,r,o,s,i,"next",e)}function i(e){c(a,r,o,s,i,"throw",e)}s(void 0)})}}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){d(e,n,t[n])})}return e}var f=function(e,n){var t,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(e,s)}catch(i){a=[6,i],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},y="import { useForm } from 'react-hook-form';\n\nimport { Group } from '@mantine/core';\n\nimport { expect } from '@storybook/jest';\nimport type { ComponentMeta, ComponentStory } from '@storybook/react';\nimport { within } from '@storybook/testing-library';\n\nimport { TESTID_LOGIN_SKELETON } from '@lihim/auth/core';\nimport { LoginFormSkeleton } from '@lihim/auth/ui';\nimport { LoginForm } from '@lihim/auth/ui';\n\nexport default {\n  component: LoginFormSkeleton,\n} as ComponentMeta<typeof LoginFormSkeleton>;\n\nconst Template: ComponentStory<typeof LoginFormSkeleton> = () => {\n  const { control } = useForm();\n\n  return (\n    <Group>\n      <LoginFormSkeleton />\n      <LoginForm\n        isLoading={false}\n        hasError={false}\n        showSignup={() => null}\n        control={control}\n        onSubmit={() => null}\n      />\n    </Group>\n  );\n};\n\nexport const Default = Template.bind({});\nDefault.play = async ({ canvasElement }) => {\n  const canvas = within(canvasElement);\n  expect(canvas.getByTestId(TESTID_LOGIN_SKELETON)).toBeVisible();\n};\n",b={Default:{startLoc:{col:59,line:17},endLoc:{col:1,line:32},startBody:{col:59,line:17},endBody:{col:1,line:32}}};let h={component:u.eS};var v=(function(){var e=(0,o.cI)().control;return(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(u.eS,{}),(0,r.jsx)(u.U0,{isLoading:!1,hasError:!1,showSignup:function(){return null},control:e,onSubmit:function(){return null}})]})}).bind({});v.play=function(){var e=p(function(e){var n,t;return f(this,function(r){return n=e.canvasElement,t=(0,i.uh)(n),(0,s.l)(t.getByTestId(l.lW)).toBeVisible(),[2]})});return function(n){return e.apply(this,arguments)}}(),v.parameters=m({storySource:{source:"() => {\n  const { control } = useForm();\n\n  return (\n    <Group>\n      <LoginFormSkeleton />\n      <LoginForm\n        isLoading={false}\n        hasError={false}\n        showSignup={() => null}\n        control={control}\n        onSubmit={() => null}\n      />\n    </Group>\n  );\n}"}},v.parameters)},"./apps/web/stories/auth/ui/login-form.stories.tsx":(e,n,t)=>{"use strict";t.r(n),t.d(n,{Default:()=>x,HasError:()=>_,Loading:()=>w,default:()=>g});var r=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),o=t("./node_modules/.pnpm/react-hook-form@7.41.5_react@18.2.0/node_modules/react-hook-form/dist/index.esm.mjs"),a=t("./node_modules/.pnpm/@storybook+jest@0.0.10_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/jest/dist/esm/index.js"),s=t("./node_modules/.pnpm/@storybook+testing-library@0.0.13_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/testing-library/dist/esm/index.js"),i=t("./libs/auth/core/src/index.ts"),l=t("./libs/auth/ui/src/index.ts"),u=t("./libs/shared/testutils/storybook/src/index.ts");function c(e,n,t,r,o,a,s){try{var i=e[a](s),l=i.value}catch(u){t(u);return}i.done?n(l):Promise.resolve(l).then(r,o)}function p(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function s(e){c(a,r,o,s,i,"next",e)}function i(e){c(a,r,o,s,i,"throw",e)}s(void 0)})}}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){d(e,n,t[n])})}return e}function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function y(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e}var b=function(e,n){var t,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(e,s)}catch(i){a=[6,i],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},h="\nimport { useForm } from 'react-hook-form';\n\nimport { expect } from '@storybook/jest';\nimport type { ComponentMeta, ComponentStory } from '@storybook/react';\nimport { within } from '@storybook/testing-library';\n\nimport {\n  ARIA_SUBMIT_LOGIN,\n  loginInputs,\n  PLACEHOLDER_PASSWORD,\n  PLACEHOLDER_PRINCIPAL,\n  TESTID_LOGIN_LOADING,\n  TESTID_SIGNUP_LINK,\n  TEXT_LOGIN_FOOTER,\n} from '@lihim/auth/core';\nimport { LoginForm } from '@lihim/auth/ui';\nimport { checkInputDefaults } from '@lihim/shared/testutils/storybook';\n\nexport default {\n  component: LoginForm,\n} as ComponentMeta<typeof LoginForm>;\n\nconst Template: ComponentStory<typeof LoginForm> = (args) => {\n  const { control } = useForm();\n\n  return (\n    <LoginForm\n      isLoading={false}\n      hasError={false}\n      showSignup={() => null}\n      control={control}\n      onSubmit={() => null}\n      {...args}\n    />\n  );\n};\n\nexport const Default = Template.bind({});\nDefault.play = async ({ canvasElement }) => {\n  const canvas = within(canvasElement);\n\n  // Locate elements\n  const principalInput = canvas.getByPlaceholderText(PLACEHOLDER_PRINCIPAL);\n  const passwordInput = canvas.getByPlaceholderText(PLACEHOLDER_PASSWORD);\n  const submitBtn = canvas.getByRole('button', { name: ARIA_SUBMIT_LOGIN });\n  const signupLink = canvas.getByTestId(TESTID_SIGNUP_LINK);\n\n  // Assert input defaults\n  await checkInputDefaults(principalInput, loginInputs[0]);\n  await checkInputDefaults(passwordInput, {\n    ...loginInputs[1],\n    type: 'password',\n  });\n  expect(submitBtn).toBeVisible();\n  expect(signupLink).toBeVisible();\n  expect(canvas.getByText(TEXT_LOGIN_FOOTER)).toBeVisible();\n};\n\nexport const Loading = Template.bind({});\nLoading.args = {\n  isLoading: true,\n};\nLoading.play = async ({ canvasElement }) => {\n  const canvas = within(canvasElement);\n  expect(canvas.getByTestId(TESTID_LOGIN_LOADING)).toBeVisible();\n};\n\nexport const HasError = Template.bind({});\nHasError.args = {\n  hasError: true,\n};\nHasError.play = async ({ canvasElement }) => {\n  const canvas = within(canvasElement);\n  const principalInput = canvas.getByPlaceholderText(PLACEHOLDER_PRINCIPAL);\n  const passwordInput = canvas.getByPlaceholderText(PLACEHOLDER_PASSWORD);\n  expect(principalInput).toHaveAttribute('aria-invalid', 'true');\n  expect(passwordInput.parentElement).toHaveAttribute('aria-invalid', 'true');\n};\n",v={Default:{startLoc:{col:51,line:24},endLoc:{col:1,line:37},startBody:{col:51,line:24},endBody:{col:1,line:37}},Loading:{startLoc:{col:51,line:24},endLoc:{col:1,line:37},startBody:{col:51,line:24},endBody:{col:1,line:37}},HasError:{startLoc:{col:51,line:24},endLoc:{col:1,line:37},startBody:{col:51,line:24},endBody:{col:1,line:37}}};let g={component:l.U0};var I=function(e){var n=(0,o.cI)().control;return(0,r.jsx)(l.U0,m({isLoading:!1,hasError:!1,showSignup:function(){return null},control:n,onSubmit:function(){return null}},e))},x=I.bind({});x.play=function(){var e=p(function(e){var n,t,r,o,l,c;return b(this,function(p){switch(p.label){case 0:return n=e.canvasElement,r=(t=(0,s.uh)(n)).getByPlaceholderText(i.Rl),o=t.getByPlaceholderText(i.P3),l=t.getByRole("button",{name:i.GL}),c=t.getByTestId(i.W4),[4,(0,u.J)(r,i.ZD[0])];case 1:return p.sent(),[4,(0,u.J)(o,y(m({},i.ZD[1]),{type:"password"}))];case 2:return p.sent(),(0,a.l)(l).toBeVisible(),(0,a.l)(c).toBeVisible(),(0,a.l)(t.getByText(i.pS)).toBeVisible(),[2]}})});return function(n){return e.apply(this,arguments)}}();var w=I.bind({});w.args={isLoading:!0},w.play=function(){var e=p(function(e){var n,t;return b(this,function(r){return n=e.canvasElement,t=(0,s.uh)(n),(0,a.l)(t.getByTestId(i.VU)).toBeVisible(),[2]})});return function(n){return e.apply(this,arguments)}}();var _=I.bind({});_.args={hasError:!0},_.play=function(){var e=p(function(e){var n,t,r,o;return b(this,function(l){return n=e.canvasElement,r=(t=(0,s.uh)(n)).getByPlaceholderText(i.Rl),o=t.getByPlaceholderText(i.P3),(0,a.l)(r).toHaveAttribute("aria-invalid","true"),(0,a.l)(o.parentElement).toHaveAttribute("aria-invalid","true"),[2]})});return function(n){return e.apply(this,arguments)}}(),x.parameters=m({storySource:{source:"(args) => {\n  const { control } = useForm();\n\n  return (\n    <LoginForm\n      isLoading={false}\n      hasError={false}\n      showSignup={() => null}\n      control={control}\n      onSubmit={() => null}\n      {...args}\n    />\n  );\n}"}},x.parameters),w.parameters=m({storySource:{source:"(args) => {\n  const { control } = useForm();\n\n  return (\n    <LoginForm\n      isLoading={false}\n      hasError={false}\n      showSignup={() => null}\n      control={control}\n      onSubmit={() => null}\n      {...args}\n    />\n  );\n}"}},w.parameters),_.parameters=m({storySource:{source:"(args) => {\n  const { control } = useForm();\n\n  return (\n    <LoginForm\n      isLoading={false}\n      hasError={false}\n      showSignup={() => null}\n      control={control}\n      onSubmit={() => null}\n      {...args}\n    />\n  );\n}"}},_.parameters)},"./apps/web/stories/auth/ui/signup-form-skeleton.stories.tsx":(e,n,t)=>{"use strict";t.r(n),t.d(n,{Default:()=>v,default:()=>h});var r=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),o=t("./node_modules/.pnpm/react-hook-form@7.41.5_react@18.2.0/node_modules/react-hook-form/dist/index.esm.mjs"),a=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Group/Group.js"),s=t("./node_modules/.pnpm/@storybook+jest@0.0.10_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/jest/dist/esm/index.js"),i=t("./node_modules/.pnpm/@storybook+testing-library@0.0.13_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/testing-library/dist/esm/index.js"),l=t("./libs/auth/core/src/index.ts"),u=t("./libs/auth/ui/src/index.ts");function c(e,n,t,r,o,a,s){try{var i=e[a](s),l=i.value}catch(u){t(u);return}i.done?n(l):Promise.resolve(l).then(r,o)}function p(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function s(e){c(a,r,o,s,i,"next",e)}function i(e){c(a,r,o,s,i,"throw",e)}s(void 0)})}}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){d(e,n,t[n])})}return e}var f=function(e,n){var t,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(e,s)}catch(i){a=[6,i],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},y="import { useForm } from 'react-hook-form';\n\nimport { Group } from '@mantine/core';\n\nimport { expect } from '@storybook/jest';\nimport type { ComponentMeta, ComponentStory } from '@storybook/react';\nimport { within } from '@storybook/testing-library';\n\nimport { TESTID_SIGNUP_SKELETON } from '@lihim/auth/core';\nimport { SignupForm, SignupFormSkeleton } from '@lihim/auth/ui';\n\nexport default {\n  component: SignupFormSkeleton,\n} as ComponentMeta<typeof SignupFormSkeleton>;\n\nconst Template: ComponentStory<typeof SignupFormSkeleton> = () => {\n  const { control } = useForm();\n\n  return (\n    <Group>\n      <SignupFormSkeleton />\n      <SignupForm\n        isLoading={false}\n        errors={{\n          firstname: false,\n          lastname: false,\n          username: false,\n          email: false,\n          password: false,\n        }}\n        showLogin={() => null}\n        control={control}\n        onSubmit={() => null}\n      />\n    </Group>\n  );\n};\n\nexport const Default = Template.bind({});\nDefault.play = async ({ canvasElement }) => {\n  const canvas = within(canvasElement);\n  expect(canvas.getByTestId(TESTID_SIGNUP_SKELETON)).toBeVisible();\n};\n",b={Default:{startLoc:{col:60,line:16},endLoc:{col:1,line:37},startBody:{col:60,line:16},endBody:{col:1,line:37}}};let h={component:u.Mm};var v=(function(){var e=(0,o.cI)().control;return(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(u.Mm,{}),(0,r.jsx)(u.Cd,{isLoading:!1,errors:{firstname:!1,lastname:!1,username:!1,email:!1,password:!1},showLogin:function(){return null},control:e,onSubmit:function(){return null}})]})}).bind({});v.play=function(){var e=p(function(e){var n,t;return f(this,function(r){return n=e.canvasElement,t=(0,i.uh)(n),(0,s.l)(t.getByTestId(l.uW)).toBeVisible(),[2]})});return function(n){return e.apply(this,arguments)}}(),v.parameters=m({storySource:{source:"() => {\n  const { control } = useForm();\n\n  return (\n    <Group>\n      <SignupFormSkeleton />\n      <SignupForm\n        isLoading={false}\n        errors={{\n          firstname: false,\n          lastname: false,\n          username: false,\n          email: false,\n          password: false,\n        }}\n        showLogin={() => null}\n        control={control}\n        onSubmit={() => null}\n      />\n    </Group>\n  );\n}"}},v.parameters)},"./apps/web/stories/auth/ui/signup-form.stories.tsx":(e,n,t)=>{"use strict";t.r(n),t.d(n,{Default:()=>x,Errors:()=>_,Loading:()=>w,default:()=>g});var r=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),o=t("./node_modules/.pnpm/react-hook-form@7.41.5_react@18.2.0/node_modules/react-hook-form/dist/index.esm.mjs"),a=t("./node_modules/.pnpm/@storybook+jest@0.0.10_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/jest/dist/esm/index.js"),s=t("./node_modules/.pnpm/@storybook+testing-library@0.0.13_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/testing-library/dist/esm/index.js"),i=t("./libs/auth/core/src/index.ts"),l=t("./libs/auth/ui/src/index.ts"),u=t("./libs/shared/testutils/storybook/src/index.ts");function c(e,n,t,r,o,a,s){try{var i=e[a](s),l=i.value}catch(u){t(u);return}i.done?n(l):Promise.resolve(l).then(r,o)}function p(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function s(e){c(a,r,o,s,i,"next",e)}function i(e){c(a,r,o,s,i,"throw",e)}s(void 0)})}}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){d(e,n,t[n])})}return e}function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function y(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e}var b=function(e,n){var t,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(e,s)}catch(i){a=[6,i],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},h="\nimport { useForm } from 'react-hook-form';\n\nimport { expect } from '@storybook/jest';\nimport type { ComponentMeta, ComponentStory } from '@storybook/react';\nimport { within } from '@storybook/testing-library';\n\nimport {\n  ARIA_SUBMIT_SIGNUP,\n  credentialInputs,\n  nameInputs,\n  PLACEHOLDER_EMAIL,\n  PLACEHOLDER_FIRSTNAME,\n  PLACEHOLDER_LASTNAME,\n  PLACEHOLDER_PASSWORD,\n  PLACEHOLDER_USERNAME,\n  TESTID_LOGIN_LINK,\n  TESTID_SIGNUP_LOADING,\n  TEXT_SIGNUP_FOOTER,\n} from '@lihim/auth/core';\nimport { SignupForm } from '@lihim/auth/ui';\nimport { checkInputDefaults } from '@lihim/shared/testutils/storybook';\n\nexport default {\n  component: SignupForm,\n} as ComponentMeta<typeof SignupForm>;\n\nconst Template: ComponentStory<typeof SignupForm> = (args) => {\n  const { control } = useForm();\n\n  return (\n    <SignupForm\n      isLoading={false}\n      errors={{\n        firstname: false,\n        lastname: false,\n        username: false,\n        email: false,\n        password: false,\n      }}\n      showLogin={() => null}\n      control={control}\n      onSubmit={() => null}\n      {...args}\n    />\n  );\n};\n\nexport const Default = Template.bind({});\nDefault.play = async ({ canvasElement }) => {\n  const canvas = within(canvasElement);\n\n  // Locate elements\n  const firstnameInput = canvas.getByPlaceholderText(PLACEHOLDER_FIRSTNAME);\n  const lastnameInput = canvas.getByPlaceholderText(PLACEHOLDER_LASTNAME);\n  const usernameInput = canvas.getByPlaceholderText(PLACEHOLDER_USERNAME);\n  const emailInput = canvas.getByPlaceholderText(PLACEHOLDER_EMAIL);\n  const passwordInput = canvas.getByPlaceholderText(PLACEHOLDER_PASSWORD);\n  const submitBtn = canvas.getByRole('button', { name: ARIA_SUBMIT_SIGNUP });\n  const loginLink = canvas.getByTestId(TESTID_LOGIN_LINK);\n\n  // Assertions\n  await checkInputDefaults(firstnameInput, nameInputs[0]);\n  await checkInputDefaults(lastnameInput, nameInputs[1]);\n  await checkInputDefaults(usernameInput, credentialInputs[0]);\n  await checkInputDefaults(emailInput, credentialInputs[1]);\n  await checkInputDefaults(passwordInput, {\n    ...credentialInputs[2],\n    type: 'password',\n  });\n  expect(submitBtn).toBeVisible();\n  expect(loginLink).toBeVisible();\n  expect(canvas.getByText(TEXT_SIGNUP_FOOTER)).toBeVisible();\n};\n\nexport const Loading = Template.bind({});\nLoading.args = {\n  isLoading: true,\n};\nLoading.play = async ({ canvasElement }) => {\n  const canvas = within(canvasElement);\n  expect(canvas.getByTestId(TESTID_SIGNUP_LOADING)).toBeVisible();\n};\n\nexport const Errors = Template.bind({});\nErrors.args = {\n  errors: {\n    firstname: true,\n    lastname: true,\n    username: true,\n    email: true,\n    password: true,\n  },\n};\nErrors.play = async ({ canvasElement }) => {\n  const canvas = within(canvasElement);\n  const firstnameInput = canvas.getByPlaceholderText(PLACEHOLDER_FIRSTNAME);\n  const lastnameInput = canvas.getByPlaceholderText(PLACEHOLDER_LASTNAME);\n  const usernameInput = canvas.getByPlaceholderText(PLACEHOLDER_USERNAME);\n  const emailInput = canvas.getByPlaceholderText(PLACEHOLDER_EMAIL);\n  const passwordInput = canvas.getByPlaceholderText(PLACEHOLDER_PASSWORD);\n  expect(firstnameInput).toHaveAttribute('aria-invalid', 'true');\n  expect(lastnameInput).toHaveAttribute('aria-invalid', 'true');\n  expect(usernameInput).toHaveAttribute('aria-invalid', 'true');\n  expect(emailInput).toHaveAttribute('aria-invalid', 'true');\n  expect(passwordInput.parentElement).toHaveAttribute('aria-invalid', 'true');\n};\n",v={Default:{startLoc:{col:52,line:28},endLoc:{col:1,line:47},startBody:{col:52,line:28},endBody:{col:1,line:47}},Loading:{startLoc:{col:52,line:28},endLoc:{col:1,line:47},startBody:{col:52,line:28},endBody:{col:1,line:47}},Errors:{startLoc:{col:52,line:28},endLoc:{col:1,line:47},startBody:{col:52,line:28},endBody:{col:1,line:47}}};let g={component:l.Cd};var I=function(e){var n=(0,o.cI)().control;return(0,r.jsx)(l.Cd,m({isLoading:!1,errors:{firstname:!1,lastname:!1,username:!1,email:!1,password:!1},showLogin:function(){return null},control:n,onSubmit:function(){return null}},e))},x=I.bind({});x.play=function(){var e=p(function(e){var n,t,r,o,l,c,p,d,f;return b(this,function(b){switch(b.label){case 0:return n=e.canvasElement,r=(t=(0,s.uh)(n)).getByPlaceholderText(i.Zl),o=t.getByPlaceholderText(i.ro),l=t.getByPlaceholderText(i.pU),c=t.getByPlaceholderText(i.jw),p=t.getByPlaceholderText(i.P3),d=t.getByRole("button",{name:i.dx}),f=t.getByTestId(i.kw),[4,(0,u.J)(r,i.DZ[0])];case 1:return b.sent(),[4,(0,u.J)(o,i.DZ[1])];case 2:return b.sent(),[4,(0,u.J)(l,i.Qi[0])];case 3:return b.sent(),[4,(0,u.J)(c,i.Qi[1])];case 4:return b.sent(),[4,(0,u.J)(p,y(m({},i.Qi[2]),{type:"password"}))];case 5:return b.sent(),(0,a.l)(d).toBeVisible(),(0,a.l)(f).toBeVisible(),(0,a.l)(t.getByText(i.IQ)).toBeVisible(),[2]}})});return function(n){return e.apply(this,arguments)}}();var w=I.bind({});w.args={isLoading:!0},w.play=function(){var e=p(function(e){var n,t;return b(this,function(r){return n=e.canvasElement,t=(0,s.uh)(n),(0,a.l)(t.getByTestId(i.vj)).toBeVisible(),[2]})});return function(n){return e.apply(this,arguments)}}();var _=I.bind({});_.args={errors:{firstname:!0,lastname:!0,username:!0,email:!0,password:!0}},_.play=function(){var e=p(function(e){var n,t,r,o,l,u,c;return b(this,function(p){return n=e.canvasElement,r=(t=(0,s.uh)(n)).getByPlaceholderText(i.Zl),o=t.getByPlaceholderText(i.ro),l=t.getByPlaceholderText(i.pU),u=t.getByPlaceholderText(i.jw),c=t.getByPlaceholderText(i.P3),(0,a.l)(r).toHaveAttribute("aria-invalid","true"),(0,a.l)(o).toHaveAttribute("aria-invalid","true"),(0,a.l)(l).toHaveAttribute("aria-invalid","true"),(0,a.l)(u).toHaveAttribute("aria-invalid","true"),(0,a.l)(c.parentElement).toHaveAttribute("aria-invalid","true"),[2]})});return function(n){return e.apply(this,arguments)}}(),x.parameters=m({storySource:{source:"(args) => {\n  const { control } = useForm();\n\n  return (\n    <SignupForm\n      isLoading={false}\n      errors={{\n        firstname: false,\n        lastname: false,\n        username: false,\n        email: false,\n        password: false,\n      }}\n      showLogin={() => null}\n      control={control}\n      onSubmit={() => null}\n      {...args}\n    />\n  );\n}"}},x.parameters),w.parameters=m({storySource:{source:"(args) => {\n  const { control } = useForm();\n\n  return (\n    <SignupForm\n      isLoading={false}\n      errors={{\n        firstname: false,\n        lastname: false,\n        username: false,\n        email: false,\n        password: false,\n      }}\n      showLogin={() => null}\n      control={control}\n      onSubmit={() => null}\n      {...args}\n    />\n  );\n}"}},w.parameters),_.parameters=m({storySource:{source:"(args) => {\n  const { control } = useForm();\n\n  return (\n    <SignupForm\n      isLoading={false}\n      errors={{\n        firstname: false,\n        lastname: false,\n        username: false,\n        email: false,\n        password: false,\n      }}\n      showLogin={() => null}\n      control={control}\n      onSubmit={() => null}\n      {...args}\n    />\n  );\n}"}},_.parameters)},"./apps/web/stories/shared/appbar/appbar.stories.tsx":(e,n,t)=>{"use strict";t.r(n),t.d(n,{Default:()=>K,ToggleTheme:()=>X,default:()=>W});var r=t("./node_modules/.pnpm/@storybook+jest@0.0.10_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/jest/dist/esm/index.js"),o=t("./node_modules/.pnpm/@storybook+testing-library@0.0.13_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/testing-library/dist/esm/index.js"),a=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),s=t("./node_modules/.pnpm/@mantine+styles@5.10.0_sogmqz4enknxtkxk3k5s6bqwnq/node_modules/@mantine/styles/esm/theme/ColorSchemeProvider.js"),i=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Group/Group.js"),l=t("./node_modules/.pnpm/@mantine+hooks@5.10.0_react@18.2.0/node_modules/@mantine/hooks/esm/use-disclosure/use-disclosure.js"),u=t("./node_modules/.pnpm/next@13.1.1_a7mipu7kvrstgwvi56qu2qyzhe/node_modules/next/link.js"),c=t.n(u),p=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Anchor/Anchor.js"),d=t("./libs/shared/core/src/index.ts"),m=function(){return(0,a.jsx)(p.e,{href:"/",component:c(),size:30,weight:"bold",variant:"text",underline:!1,children:d.JG})},f=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Menu/Menu.js"),y=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Burger/Burger.js"),b=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Loader/Loader.js"),h=t("./node_modules/.pnpm/react-icons@4.7.1_react@18.2.0/node_modules/react-icons/hi/index.esm.js"),v=t("./libs/auth/core/src/index.ts"),g="moon icon",I="sun icon",x="toggle theme",w="header menu",_="auth icon",E="header-loader",S="auth-menuitem",B=function(e){return(0,a.jsxs)(f.v,{width:180,shadow:"md",opened:e.isOpen,position:"bottom-end","aria-label":w,onOpen:e.onOpen,onClose:e.onClose,children:[(0,a.jsx)(f.v.Target,{children:(0,a.jsx)(y.O,{opened:e.isOpen,size:"sm",ml:5})}),(0,a.jsxs)(f.v.Dropdown,{children:[(0,a.jsx)(f.v.Label,{children:"Actions"}),(0,a.jsx)(f.v.Item,{icon:e.isLoading?(0,a.jsx)(b.a,{size:"xs","data-testid":E}):(0,a.jsx)(h.Lyu,{title:_}),disabled:e.isLoading,"data-testid":S,onClick:e.authFn,children:e.isLoading?d.vT:e.isLoggedIn?v.GN:v.SG})]})]})};try{B.displayName="Menu",B.__docgenInfo={description:"",displayName:"Menu",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},isLoggedIn:{defaultValue:null,description:"",name:"isLoggedIn",required:!0,type:{name:"boolean"}},onOpen:{defaultValue:null,description:"",name:"onOpen",required:!0,type:{name:"TVoidFn"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"TVoidFn"}},authFn:{defaultValue:null,description:"",name:"authFn",required:!0,type:{name:"TVoidFn"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["libs/shared/appbar/src/lib/ui/menu.tsx#Menu"]={docgenInfo:B.__docgenInfo,name:"Menu",path:"libs/shared/appbar/src/lib/ui/menu.tsx#Menu"})}catch(T){}var O=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/ActionIcon/ActionIcon.js"),L=function(e){var n=e.isDark,t=e.toggleTheme;return(0,a.jsx)(O.A,{mr:3,"aria-label":x,onClick:function(){return t()},children:n?(0,a.jsx)(h.YGJ,{title:I,size:28,role:"img"}):(0,a.jsx)(h.Lac,{title:g,size:28,role:"img"})})};try{L.displayName="ThemeToggle",L.__docgenInfo={description:"",displayName:"ThemeToggle",props:{isDark:{defaultValue:null,description:"",name:"isDark",required:!0,type:{name:"boolean"}},toggleTheme:{defaultValue:null,description:"",name:"toggleTheme",required:!0,type:{name:"DispatchWithoutAction"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["libs/shared/appbar/src/lib/ui/theme-toggle.tsx#ThemeToggle"]={docgenInfo:L.__docgenInfo,name:"ThemeToggle",path:"libs/shared/appbar/src/lib/ui/theme-toggle.tsx#ThemeToggle"})}catch(k){}var j=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Paper/Paper.js"),P=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Center/Center.js");function A(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var R=function(e){var n=e.children;return(0,a.jsx)(j.X,{p:15,shadow:"md",sx:{position:"fixed",top:0,width:"100%",zIndex:3},children:(0,a.jsx)(P.M,{children:(0,a.jsx)(P.M,{sx:function(e){var n;return A(n={justifyContent:"space-between",width:"95%"},e.fn.largerThan(550),{width:"85%"}),A(n,e.fn.largerThan(750),{width:"95%",maxWidth:750}),A(n,e.fn.largerThan(1024),{width:"95%",maxWidth:1024}),n},children:n})})})};try{R.displayName="Wrapper",R.__docgenInfo={description:"",displayName:"Wrapper",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["libs/shared/appbar/src/lib/ui/wrapper.tsx#Wrapper"]={docgenInfo:R.__docgenInfo,name:"Wrapper",path:"libs/shared/appbar/src/lib/ui/wrapper.tsx#Wrapper"})}catch(D){}function C(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function N(e){if(Array.isArray(e))return e}function F(e,n){var t,r,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var a=[],s=!0,i=!1;try{for(o=o.call(e);!(s=(t=o.next()).done)&&(a.push(t.value),!n||a.length!==n);s=!0);}catch(l){i=!0,r=l}finally{try{s||null==o.return||o.return()}finally{if(i)throw r}}return a}}function V(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function G(e,n){return N(e)||F(e,n)||q(e,n)||V()}function q(e,n){if(e){if("string"==typeof e)return C(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return C(e,n)}}var M=function(){var e=(0,s.X)(),n=e.colorScheme,t=e.toggleColorScheme,r=G((0,l.q)(!1),2),o=r[0],u=r[1];return(0,a.jsxs)(R,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(i.Z,{spacing:5,children:[(0,a.jsx)(L,{isDark:"dark"===n,toggleTheme:function(){return t()}}),(0,a.jsx)(B,{isOpen:o,isLoading:!1,isLoggedIn:!1,authFn:function(){return null},onOpen:u.open,onClose:u.close})]})]})};function z(e,n,t,r,o,a,s){try{var i=e[a](s),l=i.value}catch(u){t(u);return}i.done?n(l):Promise.resolve(l).then(r,o)}function H(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function s(e){z(a,r,o,s,i,"next",e)}function i(e){z(a,r,o,s,i,"throw",e)}s(void 0)})}}var U=function(e,n){var t,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(e,s)}catch(i){a=[6,i],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};let W={component:M};var K={args:{},play:function(e){var n=e.canvasElement;return H(function(){var e,t,a,s;return U(this,function(i){switch(i.label){case 0:return t=(e=(0,o.uh)(n)).getByText(d.JG),(0,r.l)(t).toBeVisible(),(0,r.l)(t.closest("a")).toHaveAttribute("href","/"),a=e.getByRole("button",{name:x}),(0,r.l)(a).toBeVisible(),[4,(0,o.uh)(a).findByRole("img",{name:I})];case 1:return s=i.sent(),(0,r.l)(s).toBeVisible(),[2]}})})()}},X={args:{},play:function(e){var n=e.canvasElement;return H(function(){var e,t,a,s;return U(this,function(i){switch(i.label){case 0:return e=(0,o.uh)(n),t=function(){var n=H(function(){return U(this,function(n){return[2,e.findByRole("button",{name:x})]})});return function(){return n.apply(this,arguments)}}(),a=o.mV.click,[4,t()];case 1:return[4,a.apply(o.mV,[i.sent()])];case 2:return i.sent(),[4,e.findByRole("img",{name:g})];case 3:return r.l.apply(void 0,[i.sent()]).toBeVisible(),s=o.mV.click,[4,t()];case 4:return[4,s.apply(o.mV,[i.sent()])];case 5:return i.sent(),[4,e.findByRole("img",{name:I})];case 6:return r.l.apply(void 0,[i.sent()]).toBeVisible(),[2]}})})()}}},"./apps/web/stories/shared/ui/validated-input.stories.tsx":(e,n,t)=>{"use strict";t.r(n),t.d(n,{DefaultPasswordInput:()=>S,DefaultTextInput:()=>_,PasswordInputError:()=>B,TextInputError:()=>E,TogglePassword:()=>T,default:()=>h});var r=t("./node_modules/.pnpm/react@18.2.0/node_modules/react/jsx-runtime.js"),o=t("./node_modules/.pnpm/react-hook-form@7.41.5_react@18.2.0/node_modules/react-hook-form/dist/index.esm.mjs"),a=t("./node_modules/.pnpm/@mantine+core@5.10.0_b4x4ypfkqdgbz6unljzza6keeu/node_modules/@mantine/core/esm/Box/Box.js"),s=t("./node_modules/.pnpm/@storybook+jest@0.0.10_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/jest/dist/esm/index.js"),i=t("./node_modules/.pnpm/@storybook+testing-library@0.0.13_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/testing-library/dist/esm/index.js"),l=t("./libs/shared/core/src/index.ts"),u=t("./libs/shared/ui/src/index.ts");function c(e,n,t,r,o,a,s){try{var i=e[a](s),l=i.value}catch(u){t(u);return}i.done?n(l):Promise.resolve(l).then(r,o)}function p(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function s(e){c(a,r,o,s,i,"next",e)}function i(e){c(a,r,o,s,i,"throw",e)}s(void 0)})}}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function m(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){d(e,n,t[n])})}return e}var f=function(e,n){var t,r,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=n.call(e,s)}catch(i){a=[6,i],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}},y="\n\nimport { useForm } from 'react-hook-form';\n\nimport { Box } from '@mantine/core';\n\nimport { expect } from '@storybook/jest';\nimport type { ComponentMeta, ComponentStory } from '@storybook/react';\nimport { userEvent, within } from '@storybook/testing-library';\n\nimport {\n  ARIA_HIDE_PASSWORD_ICON,\n  ARIA_SHOW_PASSWORD_ICON,\n  TESTID_PASSWORD_VISIBILITY,\n} from '@lihim/shared/core';\nimport { ValidatedInput } from '@lihim/shared/ui';\n\nexport default {\n  component: ValidatedInput,\n} as ComponentMeta<typeof ValidatedInput>;\n\nconst inputProps = {\n  text: {\n    name: 'text-name',\n    label: 'Text Input',\n    placeholder: 'Validated text input',\n  },\n  password: {\n    name: 'password-name',\n    label: 'Password Input',\n    placeholder: 'Validated password input',\n  },\n};\nconst TEXT_ERROR = 'Text is invalid';\nconst PASSWORD_ERROR = 'Password is invalid';\n\nconst TextTemplate: ComponentStory<typeof ValidatedInput> = (args) => {\n  const { control } = useForm();\n  return (\n    <Box sx={{ minWidth: '28ch' }}>\n      <ValidatedInput\n        control={control}\n        inputProps={inputProps.text}\n        {...args}\n      />\n    </Box>\n  );\n};\n\nconst PasswordTemplate: ComponentStory<typeof ValidatedInput> = (args) => {\n  const { control } = useForm();\n  return (\n    <Box sx={{ minWidth: '28ch' }}>\n      <ValidatedInput\n        isPassword\n        control={control}\n        inputProps={inputProps.password}\n        {...args}\n      />\n    </Box>\n  );\n};\n\nexport const DefaultTextInput = TextTemplate.bind({});\nDefaultTextInput.play = async ({ canvasElement }) => {\n  const canvas = within(canvasElement);\n\n  // Locate input element\n  const inputElement = canvas.getByPlaceholderText(inputProps.text.placeholder);\n\n  // Assertions\n  expect(inputElement).toHaveAttribute('type', 'text');\n  expect(inputElement).toHaveAttribute('aria-invalid', 'false');\n  expect(inputElement).toHaveAttribute('name', inputProps.text.name);\n  expect(inputElement).toHaveAttribute(\n    'placeholder',\n    inputProps.text.placeholder,\n  );\n  expect(inputElement).toHaveValue('');\n  expect(canvas.getByText(inputProps.text.label)).toBeInTheDocument();\n};\n\nexport const TextInputError = TextTemplate.bind({});\nTextInputError.args = {\n  error: TEXT_ERROR,\n};\nTextInputError.play = async ({ canvasElement }) => {\n  const canvas = within(canvasElement);\n\n  // Locate input element\n  const inputElement = canvas.getByPlaceholderText(inputProps.text.placeholder);\n\n  // Assertions\n  expect(inputElement).toHaveAttribute('aria-invalid', 'true');\n  expect(canvas.getByText(TEXT_ERROR)).toBeVisible();\n};\n\nexport const DefaultPasswordInput = PasswordTemplate.bind({});\nDefaultPasswordInput.play = async ({ canvasElement }) => {\n  const canvas = within(canvasElement);\n\n  // Locate input element\n  const inputElement = canvas.getByPlaceholderText(\n    inputProps.password.placeholder,\n  );\n\n  // Assertions\n  expect(inputElement).toHaveAttribute('type', 'password');\n  expect(inputElement.parentElement).toHaveAttribute('aria-invalid', 'false');\n  expect(inputElement).toHaveAttribute('name', inputProps.password.name);\n  expect(inputElement).toHaveAttribute(\n    'placeholder',\n    inputProps.password.placeholder,\n  );\n  expect(inputElement).toHaveValue('');\n  expect(canvas.getByText(inputProps.password.label)).toBeInTheDocument();\n};\n\nexport const PasswordInputError = PasswordTemplate.bind({});\nPasswordInputError.args = {\n  error: PASSWORD_ERROR,\n};\nPasswordInputError.play = async ({ canvasElement }) => {\n  const canvas = within(canvasElement);\n\n  // Locate input element\n  const inputElement = canvas.getByPlaceholderText(\n    inputProps.password.placeholder,\n  );\n\n  // Assertions\n  expect(inputElement.parentElement).toHaveAttribute('aria-invalid', 'true');\n  expect(canvas.getByText(PASSWORD_ERROR)).toBeVisible();\n};\n\nexport const TogglePassword = PasswordTemplate.bind({});\nTogglePassword.play = async ({ canvasElement }) => {\n  const canvas = within(canvasElement);\n\n  // Locate elements\n  const inputElement = canvas.getByPlaceholderText(\n    inputProps.password.placeholder,\n  );\n  const toggleVisibility = canvas.getByTestId(TESTID_PASSWORD_VISIBILITY);\n\n  // Toggle to visible text then assert\n  await userEvent.click(toggleVisibility);\n  expect(inputElement).toHaveAttribute('type', 'text');\n  await canvas.findByText(ARIA_HIDE_PASSWORD_ICON);\n\n  // Toggle to hidden then assert\n  await userEvent.click(toggleVisibility);\n  expect(inputElement).toHaveAttribute('type', 'password');\n  await canvas.findByText(ARIA_SHOW_PASSWORD_ICON);\n};\n",b={DefaultTextInput:{startLoc:{col:60,line:37},endLoc:{col:1,line:48},startBody:{col:60,line:37},endBody:{col:1,line:48}},TextInputError:{startLoc:{col:60,line:37},endLoc:{col:1,line:48},startBody:{col:60,line:37},endBody:{col:1,line:48}},DefaultPasswordInput:{startLoc:{col:64,line:50},endLoc:{col:1,line:62},startBody:{col:64,line:50},endBody:{col:1,line:62}},PasswordInputError:{startLoc:{col:64,line:50},endLoc:{col:1,line:62},startBody:{col:64,line:50},endBody:{col:1,line:62}},TogglePassword:{startLoc:{col:64,line:50},endLoc:{col:1,line:62},startBody:{col:64,line:50},endBody:{col:1,line:62}}};let h={component:u.a};var v={text:{name:"text-name",label:"Text Input",placeholder:"Validated text input"},password:{name:"password-name",label:"Password Input",placeholder:"Validated password input"}},g="Text is invalid",I="Password is invalid",x=function(e){var n=(0,o.cI)().control;return(0,r.jsx)(a.x,{sx:{minWidth:"28ch"},children:(0,r.jsx)(u.a,m({control:n,inputProps:v.text},e))})},w=function(e){var n=(0,o.cI)().control;return(0,r.jsx)(a.x,{sx:{minWidth:"28ch"},children:(0,r.jsx)(u.a,m({isPassword:!0,control:n,inputProps:v.password},e))})},_=x.bind({});_.play=function(){var e=p(function(e){var n,t,r;return f(this,function(o){return n=e.canvasElement,r=(t=(0,i.uh)(n)).getByPlaceholderText(v.text.placeholder),(0,s.l)(r).toHaveAttribute("type","text"),(0,s.l)(r).toHaveAttribute("aria-invalid","false"),(0,s.l)(r).toHaveAttribute("name",v.text.name),(0,s.l)(r).toHaveAttribute("placeholder",v.text.placeholder),(0,s.l)(r).toHaveValue(""),(0,s.l)(t.getByText(v.text.label)).toBeInTheDocument(),[2]})});return function(n){return e.apply(this,arguments)}}();var E=x.bind({});E.args={error:g},E.play=function(){var e=p(function(e){var n,t,r;return f(this,function(o){return n=e.canvasElement,r=(t=(0,i.uh)(n)).getByPlaceholderText(v.text.placeholder),(0,s.l)(r).toHaveAttribute("aria-invalid","true"),(0,s.l)(t.getByText(g)).toBeVisible(),[2]})});return function(n){return e.apply(this,arguments)}}();var S=w.bind({});S.play=function(){var e=p(function(e){var n,t,r;return f(this,function(o){return n=e.canvasElement,r=(t=(0,i.uh)(n)).getByPlaceholderText(v.password.placeholder),(0,s.l)(r).toHaveAttribute("type","password"),(0,s.l)(r.parentElement).toHaveAttribute("aria-invalid","false"),(0,s.l)(r).toHaveAttribute("name",v.password.name),(0,s.l)(r).toHaveAttribute("placeholder",v.password.placeholder),(0,s.l)(r).toHaveValue(""),(0,s.l)(t.getByText(v.password.label)).toBeInTheDocument(),[2]})});return function(n){return e.apply(this,arguments)}}();var B=w.bind({});B.args={error:I},B.play=function(){var e=p(function(e){var n,t,r;return f(this,function(o){return n=e.canvasElement,r=(t=(0,i.uh)(n)).getByPlaceholderText(v.password.placeholder),(0,s.l)(r.parentElement).toHaveAttribute("aria-invalid","true"),(0,s.l)(t.getByText(I)).toBeVisible(),[2]})});return function(n){return e.apply(this,arguments)}}();var T=w.bind({});T.play=function(){var e=p(function(e){var n,t,r,o;return f(this,function(a){switch(a.label){case 0:return n=e.canvasElement,r=(t=(0,i.uh)(n)).getByPlaceholderText(v.password.placeholder),o=t.getByTestId(l._N),[4,i.mV.click(o)];case 1:return a.sent(),(0,s.l)(r).toHaveAttribute("type","text"),[4,t.findByText(l.ZM)];case 2:return a.sent(),[4,i.mV.click(o)];case 3:return a.sent(),(0,s.l)(r).toHaveAttribute("type","password"),[4,t.findByText(l.XD)];case 4:return a.sent(),[2]}})});return function(n){return e.apply(this,arguments)}}(),_.parameters=m({storySource:{source:"(args) => {\n  const { control } = useForm();\n  return (\n    <Box sx={{ minWidth: '28ch' }}>\n      <ValidatedInput\n        control={control}\n        inputProps={inputProps.text}\n        {...args}\n      />\n    </Box>\n  );\n}"}},_.parameters),E.parameters=m({storySource:{source:"(args) => {\n  const { control } = useForm();\n  return (\n    <Box sx={{ minWidth: '28ch' }}>\n      <ValidatedInput\n        control={control}\n        inputProps={inputProps.text}\n        {...args}\n      />\n    </Box>\n  );\n}"}},E.parameters),S.parameters=m({storySource:{source:"(args) => {\n  const { control } = useForm();\n  return (\n    <Box sx={{ minWidth: '28ch' }}>\n      <ValidatedInput\n        isPassword\n        control={control}\n        inputProps={inputProps.password}\n        {...args}\n      />\n    </Box>\n  );\n}"}},S.parameters),B.parameters=m({storySource:{source:"(args) => {\n  const { control } = useForm();\n  return (\n    <Box sx={{ minWidth: '28ch' }}>\n      <ValidatedInput\n        isPassword\n        control={control}\n        inputProps={inputProps.password}\n        {...args}\n      />\n    </Box>\n  );\n}"}},B.parameters),T.parameters=m({storySource:{source:"(args) => {\n  const { control } = useForm();\n  return (\n    <Box sx={{ minWidth: '28ch' }}>\n      <ValidatedInput\n        isPassword\n        control={control}\n        inputProps={inputProps.password}\n        {...args}\n      />\n    </Box>\n  );\n}"}},T.parameters)},"./storybook-init-framework-entry.js":(e,n,t)=>{"use strict";var r=t("./node_modules/.pnpm/@storybook+react@6.5.15_s2vjsxnolcggrcvr44z7g6k6oa/node_modules/@storybook/react/dist/esm/client/index.js")},"?8654":()=>{},"./generated-stories-entry.cjs":(e,n,t)=>{"use strict";e=t.nmd(e),(0,t("./node_modules/.pnpm/@storybook+react@6.5.15_s2vjsxnolcggrcvr44z7g6k6oa/node_modules/@storybook/react/dist/esm/client/index.js").configure)([t("./apps/web/stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.mdx)$"),t("./apps/web/stories sync recursive ^\\.(?:(?:^%7C\\/%7C(?:(?:(?%21(?:^%7C\\/)\\.).)*?)\\/)(?%21\\.)(?=.)[^/]*?\\.stories\\.(js%7Cjsx%7Cts%7Ctsx))$")],e,!1)}},e=>{var n=n=>e(e.s=n);e.O(0,[102],()=>(n("./node_modules/.pnpm/@storybook+core-client@6.5.15_vknrbelhugdkckamahrfl2bl2m/node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),n("./node_modules/.pnpm/@storybook+core-client@6.5.15_vknrbelhugdkckamahrfl2bl2m/node_modules/@storybook/core-client/dist/esm/globals/globals.js"),n("./storybook-init-framework-entry.js"),n("./node_modules/.pnpm/@storybook+react@6.5.15_s2vjsxnolcggrcvr44z7g6k6oa/node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),n("./node_modules/.pnpm/@storybook+react@6.5.15_s2vjsxnolcggrcvr44z7g6k6oa/node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),n("./node_modules/.pnpm/@storybook+addon-docs@6.5.15_557d57ohgtkwkexrax4fuw3xiq/node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),n("./node_modules/.pnpm/@storybook+addon-actions@6.5.15_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),n("./node_modules/.pnpm/@storybook+addon-backgrounds@6.5.15_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),n("./node_modules/.pnpm/@storybook+addon-measure@6.5.15_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),n("./node_modules/.pnpm/@storybook+addon-outline@6.5.15_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),n("./node_modules/.pnpm/@storybook+addon-interactions@6.5.15_v3n4hlgsm3ywuxw3iiran3wtj4/node_modules/@storybook/addon-interactions/preview.js-generated-config-entry.js"),n("./node_modules/.pnpm/@storybook+addon-a11y@6.5.15_biqbaboplfbrettd7655fr4n2y/node_modules/@storybook/addon-a11y/preview.js-generated-config-entry.js"),n("./node_modules/.pnpm/storybook-addon-next@1.7.1_iakg5qqcmnxv7nt727fr4almry/node_modules/storybook-addon-next/dist/preview.js-generated-config-entry.js"),n("./apps/web/.storybook/preview.tsx-generated-config-entry.js"),n("./generated-stories-entry.cjs")));var t=e.O()}]);